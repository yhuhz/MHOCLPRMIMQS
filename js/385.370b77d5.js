"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[385],{4385:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ae});var t=a(1347);const n={class:"search-patients"},o={class:"flex items-center q-px-md q-pt-none"},d={class:"q-px-md"},s={class:"flex justify-between items-center"},i={class:"flex"},u={class:"flex items-center justify-between q-mb-md"},r={class:"flex justify-between"},c={class:"flex justify-between q-mt-sm"},m={class:"q-mt-xl date-added"},b={class:"flex q-mt-sm"},p={class:"q-mt-xl"},g={class:"brgy q-mt-sm"},y={class:"q-my-xl table"},k={class:"flex",style:{"justify-content":"center"}},h={class:"q-mb-md flex items-center justify-between",style:{"justify-content":"center"}},v={class:"flex",style:{"justify-content":"center"}};function f(e,l,a,f,_,x){const F=(0,t.g2)("q-btn"),w=(0,t.g2)("q-icon"),q=(0,t.g2)("q-input"),V=(0,t.g2)("q-select"),C=(0,t.g2)("q-checkbox"),A=(0,t.g2)("q-date"),D=(0,t.g2)("q-popup-proxy"),Q=(0,t.g2)("q-scroll-area"),L=(0,t.g2)("q-card"),P=(0,t.g2)("q-dialog"),S=(0,t.g2)("q-item-section"),R=(0,t.g2)("q-item"),B=(0,t.g2)("q-list"),M=(0,t.g2)("q-menu"),K=(0,t.g2)("q-td"),T=(0,t.g2)("q-th"),I=(0,t.g2)("q-table"),U=(0,t.g2)("q-form"),W=(0,t.g2)("MHCDialog");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",o,[(0,t.bF)(F,{round:"",outline:"",dense:"",color:"dark",icon:"eva-arrow-back-outline",class:"q-mr-md",onClick:l[0]||(l[0]=l=>e.$router.go(-1))}),l[20]||(l[20]=(0,t.Lk)("h5",{class:"text-weight-bold text-dark"},"PWD RECORDS",-1))]),(0,t.Lk)("div",d,[(0,t.Lk)("div",s,[(0,t.Lk)("div",i,[(0,t.bF)(q,{modelValue:e.searchValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.searchValue=l),outlined:"",dense:"","input-style":{color:"#525252"}},{prepend:(0,t.k6)((()=>[(0,t.bF)(w,{name:"mdi-account-search-outline"})])),_:1},8,["modelValue"]),(0,t.bF)(V,{modelValue:e.selectedSearchBy,"onUpdate:modelValue":l[2]||(l[2]=l=>e.selectedSearchBy=l),options:e.searchBy,outlined:"",dense:"",label:"Search By:",class:"mhc-select-200"},null,8,["modelValue","options"]),(0,t.bF)(F,{outline:"",label:"Filters","no-caps":"","icon-right":"eva-funnel-outline",color:"primary",class:"q-mx-md button-120",onClick:l[15]||(l[15]=l=>e.showFilterModal=!0)},{default:(0,t.k6)((()=>[(0,t.bF)(P,{modelValue:e.showFilterModal,"onUpdate:modelValue":l[14]||(l[14]=l=>e.showFilterModal=l)},{default:(0,t.k6)((()=>[(0,t.bF)(L,{class:"q-pa-md width-700",style:{overflow:"hidden"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",u,[l[21]||(l[21]=(0,t.Lk)("label",{class:"text-bold text-primary",style:{"font-size":"20px"}},"FILTERS",-1)),(0,t.bF)(F,{label:"Done",class:"bg-primary text-white q-px-md",flat:"",dense:"",onClick:l[3]||(l[3]=l=>e.showFilterModal=!e.showFilterModal)})]),(0,t.bF)(Q,{style:{height:"700px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.Lk)("div",null,[l[23]||(l[23]=(0,t.Lk)("label",{class:"text-primary text-weight-bold"},"Age",-1)),(0,t.Lk)("div",c,[(0,t.bF)(q,{modelValue:e.age[0],"onUpdate:modelValue":l[4]||(l[4]=l=>e.age[0]=l),dense:"",outlined:"",hint:"From",class:"q-mr-lg",style:{width:"60px"}},null,8,["modelValue"]),l[22]||(l[22]=(0,t.Lk)("div",{class:"line"},null,-1)),(0,t.bF)(q,{modelValue:e.age[1],"onUpdate:modelValue":l[5]||(l[5]=l=>e.age[1]=l),dense:"",outlined:"",hint:"To",style:{width:"60px"}},null,8,["modelValue"])])]),(0,t.Lk)("div",null,[l[24]||(l[24]=(0,t.Lk)("label",{class:"text-primary text-weight-bold"},"Sex",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.genderList,((a,n)=>((0,t.uX)(),(0,t.CE)("div",{key:n},[(0,t.bF)(C,{modelValue:e.gender_array_model,"onUpdate:modelValue":l[6]||(l[6]=l=>e.gender_array_model=l),val:n,label:a,class:"text-dark"},null,8,["modelValue","val","label"])])))),128))]),(0,t.Lk)("div",null,[l[25]||(l[25]=(0,t.Lk)("label",{class:"text-primary text-weight-bold"},"Status ",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.statusList,((a,n)=>((0,t.uX)(),(0,t.CE)("div",{key:n},[(0,t.bF)(C,{modelValue:e.status_array_model,"onUpdate:modelValue":l[7]||(l[7]=l=>e.status_array_model=l),val:n,label:a,class:"text-dark"},null,8,["modelValue","val","label"])])))),128))])]),(0,t.Lk)("div",m,[l[27]||(l[27]=(0,t.Lk)("label",{class:"text-primary text-weight-bold"},"Date Added",-1)),(0,t.Lk)("div",b,[(0,t.bF)(q,{modelValue:e.dateAdded[0],"onUpdate:modelValue":l[9]||(l[9]=l=>e.dateAdded[0]=l),dense:"",outlined:"",hint:"From",class:"width-150"},{append:(0,t.k6)((()=>[(0,t.bF)(w,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(D,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{modelValue:e.dateAdded[0],"onUpdate:modelValue":l[8]||(l[8]=l=>e.dateAdded[0]=l)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),l[26]||(l[26]=(0,t.Lk)("div",{class:"line"},null,-1)),(0,t.bF)(q,{modelValue:e.dateAdded[1],"onUpdate:modelValue":l[11]||(l[11]=l=>e.dateAdded[1]=l),dense:"",outlined:"",hint:"To",class:"width-150"},{append:(0,t.k6)((()=>[(0,t.bF)(w,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(D,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{modelValue:e.dateAdded[1],"onUpdate:modelValue":l[10]||(l[10]=l=>e.dateAdded[1]=l)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,t.Lk)("div",p,[l[28]||(l[28]=(0,t.Lk)("label",{class:"text-primary text-weight-bold"},"Barangay",-1)),(0,t.Lk)("div",null,[(0,t.bF)(F,{dense:"",label:"Select All",class:"q-mt-md q-px-md",color:"primary","no-caps":"",onClick:e.select_all_brgy},null,8,["onClick"]),(0,t.bF)(F,{dense:"",label:"Select None",class:"q-mt-md q-ml-md q-px-md",color:"primary","no-caps":"",onClick:e.select_none_brgy},null,8,["onClick"]),(0,t.Lk)("div",g,[(0,t.bF)(C,{modelValue:e.outsideCamaligCheckbox,"onUpdate:modelValue":l[12]||(l[12]=l=>e.outsideCamaligCheckbox=l),label:"Outside Camalig",class:"text-dark",disable:e.brgy_checkbox_disable},null,8,["modelValue","disable"]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.barangayList,((a,n)=>((0,t.uX)(),(0,t.CE)("div",{key:n},[(0,t.bF)(C,{modelValue:e.brgy_array_model,"onUpdate:modelValue":l[13]||(l[13]=l=>e.brgy_array_model=l),val:e.barangayList[n],label:a,class:"text-dark",disable:e.brgy_checkbox_disable},null,8,["modelValue","val","label","disable"])])))),128))])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(F,{color:"primary",label:"Search","no-caps":"","icon-right":"eva-search-outline",class:"button-120",onClick:e.getPWD},null,8,["onClick"])])]),(0,t.Lk)("div",y,[(0,t.bF)(I,{columns:e.columns,rows:e.PWD,pagination:{rowsPerPage:10},"rows-per-page-options":[5,10,15,20,0],dense:"",flat:"",class:"mhc-table"},{"body-cell-action":(0,t.k6)((a=>[(0,t.bF)(K,{props:a},{default:(0,t.k6)((()=>[(0,t.bF)(F,{dense:"",color:"primary",label:"Action","icon-right":"more_vert","no-caps":"",unelevated:"",class:"button-100 action-btn",onClick:l=>e.checkPatientQueue(a.row.patient_id)},{default:(0,t.k6)((()=>[(0,t.bF)(M,{"transition-show":"jump-down","transition-hide":"jump-up",style:{width:"250px"}},{default:(0,t.k6)((()=>[(0,t.bF)(B,{separator:"",dense:""},{default:(0,t.k6)((()=>[(0,t.bF)(R,{clickable:"",class:"drop-list",onClick:l=>e.$router.push({name:"patient-details",params:{id:a.row.patient_id}})},{default:(0,t.k6)((()=>[(0,t.bF)(S,null,{default:(0,t.k6)((()=>l[29]||(l[29]=[(0,t.eW)("View Details")]))),_:1}),(0,t.bF)(S,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(w,{size:"xs",name:"eva-eye-outline"})])),_:1})])),_:2},1032,["onClick"]),e.keySession&&5===e.keySession.department&&!e.isPatientOnQueue?((0,t.uX)(),(0,t.Wv)(R,{key:0,clickable:"",class:"drop-list",onClick:l=>e.openQueueModal(a.row)},{default:(0,t.k6)((()=>[(0,t.bF)(S,null,{default:(0,t.k6)((()=>l[30]||(l[30]=[(0,t.eW)("Add To Priority Queue")]))),_:1}),(0,t.bF)(S,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(w,{size:"xs",name:"post_add"})])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),!e.keySession||5!==e.keySession.department&&6!==e.keySession.department?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(R,{key:1,clickable:"",class:"drop-list-delete",onClick:l=>e.deletePatientRecord(a.row.patient_id)},{default:(0,t.k6)((()=>[(0,t.bF)(S,null,{default:(0,t.k6)((()=>l[31]||(l[31]=[(0,t.eW)("Declare Deceased")]))),_:1}),(0,t.bF)(S,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(w,{size:"xs",name:"event_busy"})])),_:1})])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),"header-cell-action":(0,t.k6)((l=>[(0,t.bF)(T,{props:l},{default:(0,t.k6)((()=>[e.keySession&&6===e.keySession.department?((0,t.uX)(),(0,t.Wv)(F,{key:0,dense:"",label:"Download","icon-right":"eva-download-outline","no-caps":"",color:"primary",unelevated:"",class:"button-100 download-btn",disable:!e.PWD||!e.PWD[0],onClick:e.exportTable},null,8,["disable","onClick"])):(0,t.Q3)("",!0)])),_:2},1032,["props"])])),_:1},8,["columns","rows"]),(0,t.bF)(P,{modelValue:e.queueOpenModal,"onUpdate:modelValue":l[19]||(l[19]=l=>e.queueOpenModal=l),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(L,{class:"q-pa-md",style:{width:"400px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",k,[(0,t.bF)(w,{name:"help_center",size:"xl",color:"primary"})]),l[32]||(l[32]=(0,t.Lk)("p",{class:"text-primary text-weight-bold text-24 text-center q-mb-lg"}," Which department would you like to add this patient to? ",-1)),(0,t.bF)(U,{onSubmit:e.addToQueue},{default:(0,t.k6)((()=>[(0,t.Lk)("div",h,[(0,t.bF)(q,{outlined:"",dense:"",class:"q-mr-md",modelValue:e.queueNumber,"onUpdate:modelValue":l[16]||(l[16]=l=>e.queueNumber=l),label:"Number",style:{width:"150px"},"hide-bottom-space":"",rules:[e=>!isNaN(e)&&e>0||""]},null,8,["modelValue","rules"]),(0,t.bF)(V,{flat:"",outlined:"",dense:"",style:{width:"200px"},options:e.departmentArrayQueue,modelValue:e.departmentQueue,"onUpdate:modelValue":[l[17]||(l[17]=l=>e.departmentQueue=l),e.departmentChange]},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,t.Lk)("div",v,[(0,t.bF)(F,{dense:"",class:"q-px-md q-mr-md",label:"Cancel",icon:"cancel",color:"grey-7",onClick:l[18]||(l[18]=l=>e.queueOpenModal=!e.queueOpenModal)}),(0,t.bF)(F,{dense:"",class:"q-px-md",label:"Add to Queue",type:"submit",icon:"post_add",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])]),(0,t.bF)(W,{content:e.$options.components.DeletePatientConfirmation},null,8,["content"])])}a(939),a(7049);var _=a(4187),x=a(1408),F=a(8564),w=a(3022),q=a(3328),V=a(662),C=a(4650),A=a(6091),D=a(2222),Q=a(1497),L=a(455),P=a(8883);const S={components:{MHCDialog:V.A,DeletePatientConfirmation:C.A},setup(){const e=(0,w.A)(),l=(0,L.rd)();let a=q.A.getItem("cred");NaN!=a&&null!=a||l.push({name:"login"});let t=(0,_.KR)(["PWD ID","Patient ID","Name"]),n=(0,_.KR)("PWD ID"),o=(0,_.KR)(null),d=(0,_.KR)(!0),s=["Male","Female"],i=(0,_.KR)(!1),u=(0,_.KR)(["Active","Deceased"]),r=["Anoling","Baligang","Bantonan","Brgy. 1 (Pob)","Brgy.2 (Pob)","Brgy.3 (Pob)","Brgy.4 (Pob)","Brgy.5 (Pob)","Brgy.6 (Pob)","Brgy.7 (Pob)","Bariw","Binanderahan","Binitayan","Bongabong","Cabagñan","Cabraran Pequeño","Caguiba","Calabidongan","Comun","Cotmon","Del Rosario","Gapo","Gotob","Ilawod","Iluluan","Libod","Ligban","Mabunga","Magogon","Manawan","Maninila","Mina","Miti","Palanog","Panoypoy","Pariaan","Quinartilan","Quirangay","Quitinday","Salugan","Solong","Sua","Sumlang","Tagaytay","Tagoytoy","Taladong","Taloto","Taplacon","Tinago","Tumpa"],c=(0,_.KR)([0,100]),m=(0,_.KR)([]),b=(0,_.KR)([0,1]),p=(0,_.KR)([0]),g=(0,_.KR)(r),y=(0,_.KR)(!1),k=["Male","Female"],h=(0,_.KR)(!0);const v=e=>{(0,D.b)(e),(0,A.o)()},f=()=>{g.value=r,h.value=!0},V=()=>{g.value=[],h.value=!1},C=(0,_.KR)([{name:"pwd_id",align:"left",label:"PWD ID",field:"pwd_id",sortable:!0},{name:"name",align:"left",label:"Name",field:e=>e.first_name+" "+e.last_name+(e.suffix?" "+e.suffix:""),sortable:!0},{name:"disability",align:"left",label:"Disability",field:"disability",sortable:!0},{name:"household",align:"left",label:"Household",field:"household_name",sortable:!0},{name:"barangay",align:"left",label:"Barangay",field:"barangay",sortable:!0},{name:"sex",align:"left",label:"Sex",field:e=>s[e.sex],sortable:!0},{name:"birth date",align:"left",label:"Birth date",field:"birthdate",sortable:!0},{name:"age",align:"left",label:"Age",field:"age",sortable:!0},{name:"action",align:"left",label:"",field:"",sortable:!1}]),S=()=>{let e={search_category:n.value,search_string:o.value,filters:{age:c.value,sex:b.value,status:p.value,date_added:m.value,barangay:g.value,outside_camalig:h.value}};F.A.show(),(0,x.t0)({search_by:e,pwd:!0}).then((e=>{F.A.hide()}))};S();const R=(e,l,a)=>{let t=void 0!==l?l(e,a):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`},B=()=>{const l=[C.value.map((e=>R(e.label)))].concat(x.OE.value.map((e=>C.value.map((l=>R("function"===typeof l.field?l.field(e):e[void 0===l.field?l.name:l.field],l.format,e))).join(",")))).join("\r\n"),a=(0,Q.A)("PWD Records.csv",l,"text/csv");!0!==a&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};let M=(0,_.KR)(!1);const K=e=>{(0,P.jw)(e).then((e=>{"success"===e.status?M.value=!1:M.value=!0}))};let T=(0,_.KR)(!1),I=(0,_.KR)(null),U=(0,_.KR)(null),W=(0,_.KR)([]),j=(0,_.KR)("Front Desk");const O=e=>{j.value="Front Desk",(0,P.DU)({department:null,priority:1}).then((e=>{U.value=P.$h.value})),T.value=!0,I.value=e.patient_id,0===e.sex?W.value=["Front Desk","Dental","Immunization"]:W.value=["Front Desk","Dental","Prenatal","Immunization"]},E=()=>{(0,P.DU)({department:null,priority:1}).then((e=>{U.value=P.$h.value}))},N=()=>{"Front Desk"===j.value?j.value=5:"Dental"===j.value?j.value=2:"Prenatal"===j.value?j.value=3:"Immunization"===j.value&&(j.value=7),F.A.show(),(0,P.Qz)({patient_id:I.value,department:j.value,queue_number:U.value,is_priority:1}).then((l=>{F.A.hide();let a="success"===l.status?0:1;e.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Patient added to queue successfully":"Failed to add patient to queue"}),j.value="OPD",I.value=null,U.value=null,T.value=!1}))};return{searchBy:t,selectedSearchBy:n,columns:C,searchValue:o,getPWD:S,downloadDisable:d,PWD:x.OE,showFilterModal:i,statusList:u,barangayList:r,age:c,status_array_model:p,gender_array_model:b,dateAdded:m,brgy_array_model:g,select_all_brgy:f,select_none_brgy:V,brgy_checkbox_disable:y,genderList:k,exportTable:B,keySession:a,queueOpenModal:T,patientToQueue:I,queueNumber:U,departmentArrayQueue:W,departmentQueue:j,openQueueModal:O,addToQueue:N,departmentChange:E,outsideCamaligCheckbox:h,checkPatientQueue:K,isPatientOnQueue:M,deletePatientRecord:v}}};var R=a(2968),B=a(1244),M=a(6067),K=a(3933),T=a(9549),I=a(45),U=a(3341),W=a(5460),j=a(7328),O=a(8360),E=a(5626),N=a(1263),X=a(8785),z=a(5389),$=a(3766),H=a(2589),G=a(4958),J=a(2517),Y=a(3417),Z=a(272),ee=a.n(Z);const le=(0,R.A)(S,[["render",f],["__scopeId","data-v-0d269c44"]]),ae=le;ee()(S,"components",{QBtn:B.A,QInput:M.A,QIcon:K.A,QSelect:T.A,QDialog:I.A,QCard:U.A,QScrollArea:W.A,QCheckbox:j.A,QPopupProxy:O.A,QDate:E.A,QTable:N.A,QTd:X.A,QMenu:z.A,QList:$.A,QItem:H.A,QItemSection:G.A,QTh:J.A,QForm:Y.A})}}]);