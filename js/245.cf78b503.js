"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[245],{5245:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ae});var l=a(1347),n=a(7763);const i={class:"medicine-inventory"},s={class:"flex justify-between items-center q-px-md q-pt-none"},d={class:"flex justify-start items-center"},o={class:"row q-px-lg"},u={class:"flex items-baseline justify-between q-mb-sm"},r=["onClick"],c={class:"right-panel col q-ml-sm q-px-md q-pt-lg"},m={key:0,style:{"justify-content":"center","align-items":"center"}},p={class:"text-center"},v={class:"q-my-none text-primary text-bold"},y={key:0,class:"q-my-none text-bold text-grey-7"},h={key:0},k={class:"q-mt-sm"},_={key:1,class:"q-mt-md"},b={class:"q-mt-md text-center q-my-none text-primary text-bold"},g={class:"row q-mt-md"},x={key:0,class:"col-1 text-dark",style:{visibility:"hidden"}},q={class:"row q-mb-sm"},f={class:"flex q-mt-md",style:{"justify-content":"center"}},A={class:"q-pa-lg"},D={class:"flex justify-end"},V={class:"text-primary text-weight-bold text-24 text-center q-mb-xl"},C={class:"flex justify-between items-center q-mt-sm"},P={class:"row justify-end items-center"},F={class:"row justify-end items-center"},w={class:"q-pa-lg"},L={class:"flex justify-end"},M={class:"text-primary text-weight-bold text-24 text-center q-mb-xl"},R={class:"flex"},S={class:"row q-mt-sm"},E={key:0,class:"col q-mr-md"},Q={key:1,class:"col q-mr-md"},U={class:"col-5"},K={key:0},X={class:"q-mb-md"},N={class:"row"},I={key:0,class:"col-1 text-dark",style:{visibility:"hidden"}},O={class:"row q-mb-md"};function T(e,t,a,T,W,Y){const j=(0,l.g2)("q-btn"),z=(0,l.g2)("q-select"),$=(0,l.g2)("q-separator"),H=(0,l.g2)("q-scroll-area"),B=(0,l.g2)("q-input"),G=(0,l.g2)("q-icon"),J=(0,l.g2)("q-form"),Z=(0,l.g2)("q-date"),ee=(0,l.g2)("q-popup-proxy"),te=(0,l.g2)("q-card"),ae=(0,l.g2)("q-dialog"),le=(0,l.g2)("q-radio"),ne=(0,l.g2)("MHCDialog"),ie=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("div",s,[(0,l.Lk)("div",d,[(0,l.bF)(j,{round:"",outline:"",dense:"",icon:"eva-arrow-back-outline",color:"dark",class:"q-mr-md",onClick:t[0]||(t[0]=t=>e.$router.go(-1))}),t[16]||(t[16]=(0,l.Lk)("h5",{class:"text-dark text-weight-bold"},"MEDICINE RELEASE",-1))]),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level?((0,l.uX)(),(0,l.Wv)(j,{key:0,onClick:t[1]||(t[1]=t=>e.isMedicineRelease=!0),outline:"",label:"Release Medicines","icon-right":"volunteer_activism","no-caps":"",color:"primary",class:"q-ml-xs"})):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[(0,l.Lk)("div",o,[(0,l.Lk)("div",{class:"col-4 q-pa-md q-mr-sm left-panel",style:(0,n.Tr)({height:e.$q.screen.height-180+"px"})},[(0,l.Lk)("div",u,[(0,l.bF)(z,{dense:"",outlined:"",modelValue:e.selectedView,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.selectedView=t),e.changeMode],options:e.viewOptions,style:{width:"100px"}},null,8,["modelValue","options","onUpdate:modelValue"]),(0,l.bF)(z,{dense:"",outlined:"","input-class":"text-primary text-bold",options:e.pendingDateArray,modelValue:e.selectedPendingDate,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.selectedPendingDate=t),e.changeDate],style:{"min-width":"100px"}},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",null,["Done"===e.selectedView?((0,l.uX)(),(0,l.Wv)(z,{key:0,dense:"",outlined:"",modelValue:e.selectedPerson,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedPerson=t),options:e.personOption},null,8,["modelValue","options"])):(0,l.Q3)("",!0)]),(0,l.bF)($,{color:"primary",class:"q-my-md"}),e.pendingArray.length>0?((0,l.uX)(),(0,l.Wv)(H,{key:0,style:(0,n.Tr)({height:e.$q.screen.height-330+"px"})},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.pendingArray,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"row"},["All"===e.selectedPerson||"Patients"===e.selectedPerson&&void 0!==t.patient_id||"Personnel"===e.selectedPerson&&void 0!==t.doctor_id?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"q-px-md q-py-sm q-mb-sm row cursor-pointer record-card",style:(0,n.Tr)(null!==e.selectedIndex&&e.selectedIndex===a?"background-color: #5f8d4e; color: white":"background-color: white; color: #5f8d4e"),onClick:t=>e.selectPendingRecord(a)},[(0,l.Lk)("div",null,(0,n.v_)(t.first_name+" "+(t.middle_name?t.middle_name+" ":" ")+t.last_name+" "+(t.suffix?t.suffix:"")),1)],12,r)):(0,l.Q3)("",!0)])))),128))])),_:1},8,["style"])):(0,l.Q3)("",!0)],4),(0,l.Lk)("div",c,[e.pendingArray.length>0?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("div",p,[(0,l.Lk)("h3",v,(0,n.v_)(e.selectedPrescription.opd_id?"OPD"+e.selectedPrescription.opd_id:e.selectedPrescription.dental_id?"DNTL"+e.selectedPrescription.dental_id:e.selectedPrescription.prenatal_checkup_id?"PNL Checkup "+e.selectedPrescription.prenatal_checkup_id:e.selectedPrescription.first_name+" "+(e.selectedPrescription.middle_name?e.selectedPrescription.middle_name+" ":" ")+e.selectedPrescription.last_name+" "+(e.selectedPrescription.suffix?e.selectedPrescription.suffix:"")),1),"Pending"===e.selectedView?((0,l.uX)(),(0,l.CE)("h5",y,(0,n.v_)(e.selectedPrescription.medicines.length>0?e.selectedPrescription.medicines[0].release_date:e.selectedPrescription.checkup_date),1)):(0,l.Q3)("",!0)]),(0,l.bF)(H,{style:(0,n.Tr)({height:e.$q.screen.height-310+"px"}),class:"q-mt-md"},{default:(0,l.k6)((()=>[e.selectedPrescription.prescription.length>0?((0,l.uX)(),(0,l.CE)("div",h,[t[17]||(t[17]=(0,l.Lk)("h6",{class:"text-center q-my-none text-primary text-bold"}," Prescription ",-1)),t[18]||(t[18]=(0,l.Lk)("div",{class:"row"},[(0,l.Lk)("h6",{class:"col q-my-none text-primary text-bold"}," Medicine Name "),(0,l.Lk)("h6",{class:"col-2 q-my-none text-primary text-bold"}," Quantity ")],-1)),(0,l.Lk)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.selectedPrescription.prescription,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"row"},[(0,l.bF)(B,{dense:"",borderless:"",readonly:"",modelValue:e.medicine_name,"onUpdate:modelValue":t=>e.medicine_name=t,class:"col",style:{"border-bottom":"1px solid #525252"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(B,{dense:"",borderless:"",readonly:"",modelValue:e.quantity,"onUpdate:modelValue":t=>e.quantity=t,class:"col-2",style:{"border-bottom":"1px solid #525252"}},null,8,["modelValue","onUpdate:modelValue"])])))),128))])])):(0,l.Q3)("",!0),"Done"===e.selectedView||"Pending"===e.selectedView&&e.keySession&&4===e.keySession.department?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.Lk)("h6",b,[t[19]||(t[19]=(0,l.eW)(" Medicine Release ")),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&(0===e.selectedPrescription.medicines.length||e.btnCondition)?((0,l.uX)(),(0,l.Wv)(j,{key:0,outline:"",dense:"","no-caps":"",label:"Add",icon:"add_circle",color:"primary",class:"q-px-md q-ml-md",onClick:e.addMedicine},null,8,["onClick"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",g,[t[20]||(t[20]=(0,l.Lk)("label",{class:"col text-dark text-bold q-mr-md"},"Medicine Name",-1)),t[21]||(t[21]=(0,l.Lk)("label",{class:"col-1 text-dark text-bold q-mr-md"},"Quantity",-1)),t[22]||(t[22]=(0,l.Lk)("label",{class:"col-4 text-dark text-bold q-mr-md"},"Department",-1)),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedPrescription.medicines.length>1?((0,l.uX)(),(0,l.CE)("label",x,"Quantity")):(0,l.Q3)("",!0)]),(0,l.bF)(J,{onSubmit:e.submit,onReset:e.resetMedicine},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.selectedPrescription.medicines,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"q-mt-md"},[(0,l.Lk)("div",q,[(0,l.bF)(z,{modelValue:t.medicine_details,"onUpdate:modelValue":[e=>t.medicine_details=e,t=>e.buttonCondition(a)],readonly:e.keySession&&(4!==e.keySession.department||3===e.keySession.permission_level),dense:"",outlined:"",options:e.medicineList,onFilter:e.medicineFilterFunction,"option-label":"medicine_name","option-value":"medicine_id","use-input":"","emit-value":"","map-options":"",class:"col q-mr-md","hide-bottom-space":"",rules:[e=>e||""],label:t.release_date?t.release_date:""},null,8,["modelValue","onUpdate:modelValue","readonly","options","onFilter","rules","label"]),(0,l.bF)(B,{dense:"",outlined:"",readonly:e.keySession&&(4!==e.keySession.department||3===e.keySession.permission_level),class:"col-1 q-mr-md","input-class":"text-dark",modelValue:t.quantity,"onUpdate:modelValue":[e=>t.quantity=e,t=>e.buttonCondition(a)],"hide-bottom-space":"",rules:[e=>e&&!isNaN(e)||""]},null,8,["readonly","modelValue","onUpdate:modelValue","rules"]),(0,l.bF)(z,{modelValue:t.department,"onUpdate:modelValue":[e=>t.department=e,t=>e.buttonCondition(a)],readonly:e.keySession&&!(4===e.keySession.department&&3!==e.keySession.permission_level&&!e.selectedPrescription.department),dense:"",outlined:"",options:e.departments,"option-label":"department_label","option-value":"department_id",class:"col-4 q-mr-md","hide-bottom-space":""},null,8,["modelValue","onUpdate:modelValue","readonly","options"]),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedPrescription.medicines.length>1?((0,l.uX)(),(0,l.Wv)(G,{key:0,name:"delete",color:"negative",class:"col-1 cursor-pointer",size:"30px",onClick:t=>e.removeMedicine(a)},null,8,["onClick"])):(0,l.Q3)("",!0)])])))),128)),(0,l.Lk)("div",f,[e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedPrescription.medicines.length>0&&e.btnCondition?((0,l.uX)(),(0,l.Wv)(j,{key:0,"no-caps":"",color:"primary",type:"submit",label:"Submit",class:"q-mr-xs",style:{width:"100px"}})):(0,l.Q3)("",!0),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedPrescription.medicines.length>0&&"Done"!==e.selectedView?((0,l.uX)(),(0,l.Wv)(j,{key:1,"no-caps":"",outline:"",type:"reset",color:"primary",label:"Reset",class:"q-ml-xs",style:{width:"100px"}})):(0,l.Q3)("",!0)])])),_:1},8,["onSubmit","onReset"])])):(0,l.Q3)("",!0)])),_:1},8,["style"])])):(0,l.Q3)("",!0)])])]),(0,l.bF)(ae,{modelValue:e.isCustomDate,"onUpdate:modelValue":t[9]||(t[9]=t=>e.isCustomDate=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(te,{style:{width:"500px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",A,[(0,l.Lk)("div",D,[(0,l.bF)(j,{onClick:e.closeCustomDate,dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,8,["onClick"])]),(0,l.Lk)("p",V,[(0,l.bF)(G,{name:"calendar_month",class:"q-mr-xs q-gutter-xs"}),t[23]||(t[23]=(0,l.eW)(" SELECT CUSTOM DATES "))]),(0,l.Lk)("div",C,[(0,l.bF)(B,{dense:"",outlined:"",hint:"From",class:"width-150",modelValue:e.dateArray[0],"onUpdate:modelValue":t[6]||(t[6]=t=>e.dateArray[0]=t),readonly:""},{append:(0,l.k6)((()=>[(0,l.bF)(G,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(Z,{modelValue:e.dateArray[0],"onUpdate:modelValue":[t[5]||(t[5]=t=>e.dateArray[0]=t),e.changeCustomDate],mask:"YYYY-MM-DD",options:t=>t<=e.dateToday},{default:(0,l.k6)((()=>[(0,l.Lk)("div",P,[(0,l.bo)((0,l.bF)(j,{color:"primary",label:"Close",dense:"",flat:""},null,512),[[ie]])])])),_:1},8,["modelValue","options","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),t[24]||(t[24]=(0,l.Lk)("div",{class:"line"},null,-1)),(0,l.bF)(B,{dense:"",outlined:"",hint:"To",class:"width-150",modelValue:e.dateArray[1],"onUpdate:modelValue":t[8]||(t[8]=t=>e.dateArray[1]=t),readonly:""},(0,l.eX)({_:2},[e.dateArray[0]&&null!==e.dateArray[0]&&""!==e.dateArray[0]?{name:"append",fn:(0,l.k6)((()=>[(0,l.bF)(G,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(Z,{modelValue:e.dateArray[1],"onUpdate:modelValue":t[7]||(t[7]=t=>e.dateArray[1]=t),mask:"YYYY-MM-DD",options:t=>t>=e.firstDate&&t<=e.dateToday},{default:(0,l.k6)((()=>[(0,l.Lk)("div",F,[(0,l.bo)((0,l.bF)(j,{color:"primary",label:"Close",dense:"",flat:""},null,512),[[ie]])])])),_:1},8,["modelValue","options"])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["modelValue"])]),e.dateArray[0]&&e.dateArray[1]?((0,l.uX)(),(0,l.Wv)(j,{key:0,label:"Select Dates",color:"primary",icon:"done",style:{width:"100%"},class:"q-mt-md",onClick:e.getRecordsFromCustomDate},null,8,["onClick"])):(0,l.Q3)("",!0)])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(ae,{modelValue:e.isMedicineRelease,"onUpdate:modelValue":t[15]||(t[15]=t=>e.isMedicineRelease=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(te,{style:{"min-width":"500px","max-width":"750px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",w,[(0,l.Lk)("div",L,[(0,l.bo)((0,l.bF)(j,{dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,512),[[ie]])]),(0,l.Lk)("p",M,[(0,l.bF)(G,{name:"volunteer_activism",class:"q-mr-xs q-gutter-xs"}),t[25]||(t[25]=(0,l.eW)(" RELEASE MEDICINES "))]),(0,l.bF)(J,{onSubmit:e.addMedicineReleasesMass},{default:(0,l.k6)((()=>[(0,l.Lk)("div",R,[(0,l.bF)(le,{modelValue:e.patientDoctor,"onUpdate:modelValue":[t[10]||(t[10]=t=>e.patientDoctor=t),e.changePatientDoctor],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Patient",label:"Patient"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(le,{modelValue:e.patientDoctor,"onUpdate:modelValue":[t[11]||(t[11]=t=>e.patientDoctor=t),e.changePatientDoctor],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"Personnel",label:"Personnel"},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",S,["Patient"===e.patientDoctor?((0,l.uX)(),(0,l.CE)("div",E,[t[26]||(t[26]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Patient ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(z,{outlined:"","hide-bottom-space":"",modelValue:e.patient_id,"onUpdate:modelValue":t[12]||(t[12]=t=>e.patient_id=t),onFilter:e.patientFilterFunction,"option-label":"patient_name","option-value":"patient_id",options:e.patientOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules"])])):((0,l.uX)(),(0,l.CE)("div",Q,[t[27]||(t[27]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Personnel ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(z,{outlined:"","hide-bottom-space":"",modelValue:e.doctor_id,"onUpdate:modelValue":[t[13]||(t[13]=t=>e.doctor_id=t),e.findDepartment],onFilter:e.userFilterFunction,"option-label":"user_name","option-value":"user_id",options:e.userOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules","onUpdate:modelValue"])])),(0,l.Lk)("div",U,[t[28]||(t[28]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Department "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(z,{"hide-bottom-space":"",disable:"Patient"!==e.patientDoctor,options:e.filtersDepartment,dense:"",outlined:"",modelValue:e.selectedDepartment,"onUpdate:modelValue":t[14]||(t[14]=t=>e.selectedDepartment=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["disable","options","modelValue","rules"])])]),(0,l.bF)($,{class:"q-my-md",color:"primary"}),(e.patient_id||e.doctor_id)&&e.selectedDepartment?((0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("div",X,[0===e.medicineArray.length||e.btnConditionMass?((0,l.uX)(),(0,l.Wv)(j,{key:0,label:"Add",icon:"add_circle",color:"primary",outline:"","no-caps":"",onClick:e.addMedicineMass},null,8,["onClick"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",N,[t[29]||(t[29]=(0,l.Lk)("label",{class:"col text-dark text-bold q-mr-md"},"Medicine Name",-1)),t[30]||(t[30]=(0,l.Lk)("label",{class:"col-2 text-dark text-bold q-mr-md"},"Quantity",-1)),e.medicineArray.length>1?((0,l.uX)(),(0,l.CE)("label",I,"Quantity")):(0,l.Q3)("",!0)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.medicineArray,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a},[(0,l.Lk)("div",O,[(0,l.bF)(z,{modelValue:t.medicine_details,"onUpdate:modelValue":[e=>t.medicine_details=e,t=>e.buttonConditionMass(a)],dense:"",outlined:"",options:e.medicineListMass,onFilter:e.medicineFilterFunctionMass,"option-label":"medicine_name","option-value":"medicine_id","use-input":"","emit-value":"","map-options":"","new-value-mode":"add-unique",class:"col q-mr-md"},null,8,["modelValue","onUpdate:modelValue","options","onFilter"]),(0,l.bF)(B,{dense:"",outlined:"",class:"col-2 q-mr-md","input-class":"text-dark",modelValue:t.quantity,"onUpdate:modelValue":[e=>t.quantity=e,t=>e.buttonConditionMass(a)],"hide-bottom-space":"",rules:[e=>!isNaN(e)||"Numbers only"]},null,8,["modelValue","onUpdate:modelValue","rules"]),e.medicineArray.length>1?((0,l.uX)(),(0,l.Wv)(G,{key:0,name:"delete",color:"negative",class:"col-1 cursor-pointer",size:"30px",onClick:t=>e.removeMedicineMass(a)},null,8,["onClick"])):(0,l.Q3)("",!0)])])))),128)),(0,l.Lk)("div",null,[e.medicineArray.length>0&&e.btnCondition?((0,l.uX)(),(0,l.Wv)(j,{key:0,label:"Submit",type:"submit","no-caps":"",color:"primary"})):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0)])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(ne,{content:e.$options.components.DeleteMedicineConfirmation},null,8,["content"])])}a(939),a(4520);var W=a(4187),Y=(a(3877),a(3022)),j=a(8564),z=a(891),$=a(3328),H=a(4202),B=a(9100);let G=(0,W.KR)([]),J=((0,W.tB)(G),(0,W.KR)([]),"http://localhost/MHOCLPRMIMQS PHP/Medicine and Supplies/prescription_api.php"),Z=e=>new Promise(((t,a)=>{B.A.get(J,{params:{payload:e}}).then((e=>{console.log(e.data),"success"===e.data.status?G.value=e.data.data:console.log(e.data.data),t(e.data)})).catch((e=>{a(e)}))})),ee=e=>new Promise(((t,a)=>{B.A.put(J,e).then((e=>{console.log(e.data.data),"success"===e.data.status||console.log(e.data),t(e.data)})).catch((e=>{a(e)}))}));var te=a(8822),ae=a(1408),le=a(5278),ne=(a(6091),a(662)),ie=(a(2222),a(455));a(2483);const se={components:{MHCDialog:ne.A,DeleteMedicineConfirmation:le.A},setup(){const e=(0,ie.rd)(),t=((0,ie.lq)(),(0,Y.A)());let a=$.A.getItem("cred");null===a&&e.push({name:"login"});let l=["Pending","Done"],n=(0,W.KR)("Pending"),i=["Today","This Week","This Month","Custom Date"],s=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"],d=(0,W.KR)("Today"),o=(0,W.KR)([]),u=(0,W.KR)([]),r=(0,W.KR)(null),c=(0,W.KR)("All"),m=["All","Patients","Personnel"];const p=e=>{u.value=o.value[e],r.value=e};j.A.show(),Z({date:d.value,mode:"pending"}).then((e=>{j.A.hide(),e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}));const v=()=>{"Pending"===n.value?(j.A.show(),Z({date:"Custom Date"!==d.value?d.value:k.value,mode:"pending"}).then((e=>{j.A.hide(),e.data.length>0?(o.value=e.data,u.value=o.value[0],r.value=0):o.value=e.data}))):(j.A.show(),Z({date:"Custom Date"!==d.value?d.value:k.value,mode:"done"}).then((e=>{j.A.hide(),e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)})))};let y=(0,W.KR)(!1),h=z.Ay.formatDate(new Date,"YYYY-MM-DD"),k=(0,W.KR)(["2023-01-01",h]),_=(0,W.KR)(null);const b=()=>{_.value=k.value[0].replaceAll("-","/")},g=()=>{"Custom Date"!==d.value?"Pending"===n.value?(j.A.show(),Z({date:d.value,mode:"pending"}).then((e=>{j.A.hide(),e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}))):(j.A.show(),Z({date:d.value,mode:"done"}).then((e=>{j.A.hide(),e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}))):y.value=!0},x=()=>{y.value=!1,d.value="Today",g()},q=()=>{"Pending"===n.value?(j.A.show(),Z({date:k.value,mode:"pending"}).then((e=>{j.A.hide(),y.value=!1,e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}))):(j.A.show(),Z({date:k.value,mode:"done"}).then((e=>{j.A.hide(),y.value=!1,e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)})))},f=()=>{C.value=!1,u.value.medicines.push({medicine_details:{medicine_name:null,medicine_id:null},quantity:null,department:{department_id:u.value.department?u.value.department:null,department_label:u.value.department?s[u.value.department-1]:null}})},A=e=>{C.value=!0,u.value.medicines.splice(e,1)};let D=(0,W.KR)([]);const V=(e,t,a)=>{e.length>3?t((()=>{const t=String(e.toLowerCase());(0,H.Nn)(t).then((e=>{if(D.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={medicine_name:e.generic_name+" - "+e.brand_name+" ("+e.exp_date+") ("+(e.quantity-e.quantity_released)+")",medicine_id:e.medicine_id};D.value.push(t)}))}}))})):a()};let C=(0,W.KR)(!0);const P=e=>{try{null!==u.value.medicines[e].medicine_details.medicine_id&&""!==u.value.medicines[e].medicine_details.medicine_id&&null!==u.value.medicines[e].quantity&&""!==u.value.medicines[e].quantity&&(C.value=!0)}catch(e){C.value=!1}},F=()=>{u.value.medicines=[]},w=()=>{let e={patient_id:u.value.patient_id,department:u.value.department,released_by:a&&a.user_id,medicine_array:u.value.medicines,release_date:u.value.checkup_date};j.A.show(),(0,H.rf)(e).then((e=>{"success"===e.status&&ee(u.value.prescription).then((e=>{j.A.hide();let a="success"===e.status?0:1;t.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Medicine releases added successfully":"Failed to add medicine releases"}),0===a&&("Custom Date"!==d.value?(j.A.show(),Z({date:d.value,mode:"pending"}).then((e=>{j.A.hide(),e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}))):(j.A.show(),Z({date:k.value,mode:"pending"}).then((e=>{j.A.hide(),y.value=!1,e.data.length>0&&(o.value=e.data,u.value=o.value[0],r.value=0)}))))})),u.value.medicines=[]}))},L=()=>{let e={patient_id:u.value.patient_id,doctor_id:u.value.doctor_id,released_by:a&&a.user_id,medicine_array:u.value.medicines,date:"Custom Date"!==d.value?d.value:k.value};j.A.show(),(0,H.wW)(e).then((e=>{j.A.hide(),u.value.medicines=e.data;let a="success"===e.status?0:1;t.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Medicine releases edited successfully":"Failed to edit medicine releases"})}))},M=()=>{"Pending"===n.value?w():L()};let R=(0,W.KR)(!1),S=(0,W.KR)("Patient"),E=(0,W.KR)(null),Q=(0,W.KR)(null),U=(0,W.KR)(null),K=(0,W.KR)([]);"Patient"===S.value?K.value=["Outpatient Department","Dental","Prenatal and Immunization"]:K.value=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"];const X=()=>{E.value=null,Q.value=null,U.value=null,"Patient"===S.value?K.value=["Outpatient Department","Dental","Prenatal","Immunization"]:K.value=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"]};let N=(0,W.KR)(!0);const I=e=>{try{null!==O.value[e].medicine_details.medicine_id&&""!==O.value[e].medicine_details.medicine_id&&null!==O.value[e].quantity&&""!==O.value[e].quantity&&(C.value=!0)}catch(e){C.value=!1}};let O=(0,W.KR)([]);const T=()=>{O.value.push({medicine_details:{medicine_name:null,medicine_id:null},quantity:null})},B=e=>{O.value.splice(e,1)};let G=(0,W.KR)([]);const J=(e,t,a)=>{e.length>3?t((()=>{const t=String(e.toLowerCase());(0,H.Nn)(t).then((e=>{if(G.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={medicine_name:e.generic_name+" - "+e.brand_name+" ("+e.exp_date+") ("+(e.quantity-e.quantity_released)+")",medicine_id:e.medicine_id};G.value.push(t)}))}}))})):a()};let le=(0,W.KR)([]);const ne=(e,t,a)=>{e&&(e.length>5||!isNaN(e))?t((()=>{if(isNaN(e)){const t=String(e.toLowerCase());(0,ae.qi)({name_string:t}).then((e=>{if(le.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={patient_name:e.patient_id+" - "+e.name,patient_id:e.patient_id};le.value.push(t)}))}}))}else(0,ae.qi)({id_string:e}).then((e=>{if(le.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={patient_name:e.patient_id+" - "+e.name,patient_id:e.patient_id};le.value.push(t)}))}}))})):a()};let se=(0,W.KR)([]);const de=(e,t,a)=>{e.length>5||!isNaN(e)?t((()=>{if(isNaN(e)){const t=String(e.toLowerCase());(0,te.i4)(t).then((e=>{if(se.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};se.value.push(t)}))}}))}else(0,te.Wh)(e).then((e=>{if(se.value=[],"success"===e.status){let t=(0,W.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};se.value.push(t)}))}}))})):a()},oe=()=>{null!==Q.value?(0,te.ol)(Q.value).then((e=>{U.value=K.value[e.data[0].department-1]})):U.value=null},ue=()=>{let e={patient_id:E.value,doctor_id:Q.value,department:K.value.indexOf(U.value)+1,released_by:a&&a.user_id,medicine_array:O.value};j.A.show(),(0,H.rf)(e).then((e=>{j.A.hide(),R.value=!1;let a="success"===e.status?0:1;t.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Medicine releases added successfully":"Failed to add medicine releases"}),E.value=null,Q.value=null,U.value=null,O.value=[],n.value="Done",d.value="Today",v()}))};return{keySession:a,pendingDateArray:i,selectedPendingDate:d,viewOptions:l,selectedView:n,pendingArray:o,selectedPrescription:u,selectPendingRecord:p,selectedIndex:r,changeDate:g,isCustomDate:y,closeCustomDate:x,dateArray:k,dateToday:h,changeCustomDate:b,firstDate:_,getRecordsFromCustomDate:q,addMedicine:f,removeMedicine:A,medicineList:D,medicineFilterFunction:V,resetMedicine:F,buttonCondition:P,btnCondition:C,submit:M,changeMode:v,selectedPerson:c,personOption:m,departments:s,isMedicineRelease:R,patientDoctor:S,patient_id:E,doctor_id:Q,selectedDepartment:U,filtersDepartment:K,changePatientDoctor:X,btnConditionMass:N,buttonConditionMass:I,medicineArray:O,addMedicineMass:T,removeMedicineMass:B,medicineListMass:G,medicineFilterFunctionMass:J,patientOptions:le,patientFilterFunction:ne,userOptions:se,userFilterFunction:de,findDepartment:oe,addMedicineReleasesMass:ue}}};var de=a(2968),oe=a(1244),ue=a(9549),re=a(6067),ce=a(3933),me=a(6915),pe=a(5460),ve=a(3417),ye=a(45),he=a(3341),ke=a(8360),_e=a(5626),be=a(9647),ge=a(8657),xe=a(272),qe=a.n(xe);const fe=(0,de.A)(se,[["render",T],["__scopeId","data-v-3776ff5a"]]),Ae=fe;qe()(se,"components",{QBtn:oe.A,QSelect:ue.A,QInput:re.A,QIcon:ce.A,QSeparator:me.A,QScrollArea:pe.A,QForm:ve.A,QDialog:ye.A,QCard:he.A,QPopupProxy:ke.A,QDate:_e.A,QRadio:be.A}),qe()(se,"directives",{ClosePopup:ge.A})}}]);