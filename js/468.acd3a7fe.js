"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[468],{468:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var i=a(1347);const n={class:"q-pa-md"},l={class:"flex items-baseline justify-between"},s={class:"card-box q-mt-md"},o={class:"row q-mb-md"},d={class:"col q-px-md"},u={class:"row flex justify-between items-baseline"},r={class:"row flex justify-between items-baseline"},c={class:"row flex justify-between items-baseline"},m={class:"row flex justify-between items-baseline"},p={class:"row justify-end items-center"},h={class:"col-4 text-primary q-mr-md",style:{overflow:"auto"}};function x(e,t,a,x,f,b){const _=(0,i.g2)("q-btn"),v=(0,i.g2)("q-select"),y=(0,i.g2)("q-input"),g=(0,i.g2)("q-date"),w=(0,i.g2)("q-popup-proxy"),k=(0,i.g2)("q-icon"),q=(0,i.g2)("q-form"),V=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(q,{onSubmit:e.addFunction},{default:(0,i.k6)((()=>[(0,i.Lk)("div",l,[t[6]||(t[6]=(0,i.Lk)("div",{class:"column items-center"},[(0,i.Lk)("label",{class:"text-primary text-weight-bold text-h4"},"New Immunization Record")],-1)),(0,i.Lk)("div",null,[(0,i.bF)(_,{type:"submit",dense:"",label:"Save",icon:"save","no-caps":"",color:"primary",class:"q-px-lg"}),(0,i.bF)(_,{onClick:e.cancelFunction,dense:"",label:"Cancel",icon:"close","no-caps":"",class:"q-px-lg q-ml-sm",outline:"",color:"primary"},null,8,["onClick"])])]),(0,i.Lk)("div",s,[t[11]||(t[11]=(0,i.Lk)("div",null,[(0,i.Lk)("p",{class:"bg-primary text-white text-center mn-heading"}," Midwife's Notes ")],-1)),(0,i.Lk)("div",o,[(0,i.Lk)("div",d,[(0,i.Lk)("div",u,[t[7]||(t[7]=(0,i.Lk)("p",{class:"text-primary text-weight-bold"},"Vaccine Used:",-1)),(0,i.bF)(v,{"hide-bottom-space":"",outlined:"",dense:"","use-input":"","use-chips":"","new-value-mode":"add-unique","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.vaccine_used,"onUpdate:modelValue":t[0]||(t[0]=t=>e.patientRecordInfo.vaccine_used=t),options:e.vaccineArray,style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","options","rules"])]),(0,i.Lk)("div",r,[t[8]||(t[8]=(0,i.Lk)("p",{class:"text-primary text-weight-bold"},"Immunization Date:",-1)),(0,i.bF)(y,{disable:"","hide-bottom-space":"",autogrow:"",outlined:"",dense:"","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.immunization_date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.patientRecordInfo.immunization_date=t),style:{width:"280px"}},null,8,["modelValue"])]),(0,i.Lk)("div",c,[t[9]||(t[9]=(0,i.Lk)("p",{class:"text-primary text-weight-bold"},"Purpose:",-1)),(0,i.bF)(v,{"hide-bottom-space":"",outlined:"",dense:"","use-input":"","use-chips":"","new-value-mode":"add-unique","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.purpose,"onUpdate:modelValue":t[2]||(t[2]=t=>e.patientRecordInfo.purpose=t),options:e.purposeArray,style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","options","rules"])]),(0,i.Lk)("div",m,[t[10]||(t[10]=(0,i.Lk)("p",{class:"text-primary text-weight-bold"},"Next Immunization:",-1)),(0,i.bF)(y,{readonly:"","hide-bottom-space":"",autogrow:"",outlined:"",dense:"","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.next_immunization_date,"onUpdate:modelValue":t[4]||(t[4]=t=>e.patientRecordInfo.next_immunization_date=t),style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},{append:(0,i.k6)((()=>[(0,i.bF)(k,{name:"event",class:"cursor-pointer",color:"primary"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{mask:"YYYY-MM-DD",options:t=>t>=e.checkup_date,modelValue:e.patientRecordInfo.next_immunization_date,"onUpdate:modelValue":t[3]||(t[3]=t=>e.patientRecordInfo.next_immunization_date=t)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",p,[(0,i.bo)((0,i.bF)(_,{color:"primary",label:"Close",dense:"",flat:""},null,512),[[V]])])])),_:1},8,["options","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])])]),(0,i.Lk)("div",h,[(0,i.bF)(y,{autogrow:"",outlined:"",dense:"","input-class":"text-primary","input-style":"min-height: 220px; max-height: 220px",placeholder:"Enter comments here",class:"row",modelValue:e.patientRecordInfo.comments,"onUpdate:modelValue":t[5]||(t[5]=t=>e.patientRecordInfo.comments=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","rules"])])])])])),_:1},8,["onSubmit"])])}a(939),a(4520);var f=a(4187),b=a(455),_=a(7370),v=a(8822),y=a(8564),g=a(3328),w=a(3022),k=a(891);const q={setup(){const e=(0,w.A)(),t=(0,b.lq)(),a=(0,b.rd)();let i=g.A.getItem("cred");NaN!=i&&null!=i||a.push({name:"login"});let n=["Pediatric Vaccination","Family Planning"],l=["BCG","HBV","DPT","OPV","Measles Vaccine"],s=(0,f.KR)(null),o=(0,f.KR)({patient_id:t.params.id,immunizer_id:{user_id:i?i.user_id:null,user_name:i&&i.first_name+" "+i.last_name+" "+(null!=i.suffix?i.suffix:"")},immunization_date:k.Ay.formatDate(new Date,"YYYY-MM-DD"),purpose:null,next_immunization_date:null,vaccine_used:null,comments:null,status:0});s.value=o.value.immunization_date.replaceAll("-","/");let d=(0,f.KR)([]);const u=(e,t,a)=>{e.length>-1?t((()=>{const t=String(e.toLowerCase());(0,v.i4)(t).then((e=>{if(d.value=[],"success"===e.status){let t=(0,f.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.user_name,user_id:e.id};d.value.push(t)}))}}))})):a()};let r=()=>{a.push({name:"patient-details",params:{id:t.params.id}})};const c=()=>{y.A.show(),null!=o.value.immunizer_id.user_id&&(o.value.immunizer_id=o.value.immunizer_id.user_id),(0,_.Nk)(o.value,t.params.department).then((i=>{y.A.hide();let n="success"===i.status?0:1;e.notify({type:0===n?"positive":"negative",classes:"text-white",message:0===n?"Patient record added successfully":"Failed to add patient record"}),0===n&&a.push({name:"Immunization/patient_records",params:{record_id:i.data.record_id,department:t.params.department}})}))};return{patientRecordInfo:o,addFunction:c,cancelFunction:r,userOptions:d,userFilterFunction:u,purposeArray:n,checkup_date:s,vaccineArray:l}}};var V=a(2968),F=a(3417),R=a(1244),I=a(9549),A=a(6067),L=a(3933),z=a(8360),C=a(5626),D=a(7861),P=a(8657),Q=a(272),Y=a.n(Q);const N=(0,V.A)(q,[["render",x],["__scopeId","data-v-227f7e36"]]),U=N;Y()(q,"components",{QForm:F.A,QBtn:R.A,QSelect:I.A,QInput:A.A,QIcon:L.A,QPopupProxy:z.A,QDate:C.A,QField:D.A}),Y()(q,"directives",{ClosePopup:P.A})}}]);