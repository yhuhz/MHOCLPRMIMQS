"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[774],{3774:(e,t,a)=>{a.r(t),a.d(t,{default:()=>nt});var l=a(1347),i=a(7763);const s={class:"medicine-inventory-details"},d={class:"flex items-center q-px-md"},n={class:"row q-px-md q-mb-xl"},o={class:"col-3 medicine-details-col"},c={class:"text-primary text-center text-weight-bold text-24 q-mt-sm"},r={class:"flex justify-between q-px-md"},u={class:"text-primary"},m={class:"flex justify-between q-px-md"},p={class:"text-primary"},b={class:"flex justify-between q-px-md"},k={class:"text-primary"},_={class:"flex justify-between q-px-md"},v={class:"text-primary"},x={class:"flex justify-between q-px-md"},f={class:"text-primary"},y={class:"flex justify-between q-px-md"},g={class:"text-primary"},h={class:"flex justify-between q-px-md"},q={class:"text-primary"},L={class:"flex justify-between q-px-md"},R={class:"text-primary"},w={class:"flex justify-between q-px-md"},F={class:"text-primary"},D={class:"flex justify-between q-px-md"},V={class:"text-primary"},M={class:"flex justify-between q-px-md"},C={class:"text-primary"},A={class:"flex justify-between q-px-md"},E={class:"text-primary"},U={class:"flex justify-between q-px-md"},S={class:"text-primary"},I={class:"flex justify-between q-px-md"},N={class:"text-primary"},j={class:"flex justify-between q-px-md"},K={class:"text-primary"},Q={class:"flex justify-between q-px-md"},P={class:"text-primary"},T={class:"col q-px-md"},Y={class:"flex justify-between"},W={class:"flex justify-between"},X={class:"column"},O={class:"column q-ml-xl"},z={class:"row q-mt-md"},B={class:"col-3"},$={class:"flex items-center justify-start"},H={class:"col q-ml-md"},G={class:"flex justify-between"},J={class:"q-pa-md"},Z={class:"flex justify-end"},ee={class:"q-my-md q-ml-md"},te={class:"row q-mb-md q-px-lg"},ae={key:0,class:"col q-mr-md"},le={key:1,class:"col q-mr-md"},ie={class:"col"},se={class:"row q-mb-md q-px-lg"},de={class:"col q-mr-md"},ne={class:"col"},oe={class:"flex justify-center items-center q-my-lg"},ce={class:"q-mt-lg"},re={class:"q-pa-md"},ue={class:"flex justify-end"},me={class:"q-my-md q-ml-md"},pe={class:"row q-mb-md q-px-lg"},be={key:0,class:"col q-mr-md"},ke={key:1,class:"col q-mr-md"},_e={class:"col"},ve={class:"row q-mb-md q-px-lg"},xe={class:"col q-mr-md"},fe={class:"col"},ye={class:"flex justify-center items-center q-my-lg"};function ge(e,t,a,ge,he,qe){const Le=(0,l.g2)("q-btn"),Re=(0,l.g2)("q-icon"),we=(0,l.g2)("q-checkbox"),Fe=(0,l.g2)("q-input"),De=(0,l.g2)("q-date"),Ve=(0,l.g2)("q-popup-proxy"),Me=(0,l.g2)("q-card"),Ce=(0,l.g2)("q-menu"),Ae=(0,l.g2)("q-radio"),Ee=(0,l.g2)("q-select"),Ue=(0,l.g2)("q-form"),Se=(0,l.g2)("q-dialog"),Ie=(0,l.g2)("q-item-section"),Ne=(0,l.g2)("q-item"),je=(0,l.g2)("q-list"),Ke=(0,l.g2)("q-td"),Qe=(0,l.g2)("q-th"),Pe=(0,l.g2)("q-table"),Te=(0,l.g2)("MHCDialog"),Ye=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",d,[(0,l.bF)(Le,{round:"",outline:"",dense:"",icon:"eva-arrow-back-outline",color:"dark",class:"q-mr-md",onClick:t[0]||(t[0]=t=>e.$router.go(-1))}),t[27]||(t[27]=(0,l.Lk)("h5",{class:"text-dark text-weight-bold"},"MEDICINE DETAILS",-1))]),(0,l.Lk)("div",n,[(0,l.Lk)("div",o,[(0,l.Lk)("p",c,[(0,l.bF)(Re,{name:"bi-capsule-pill",class:"q-mr-xs"}),t[28]||(t[28]=(0,l.eW)(" DETAILS "))]),(0,l.Lk)("div",r,[t[29]||(t[29]=(0,l.Lk)("p",{class:"text-dark"},"Medicine ID:",-1)),(0,l.Lk)("p",u,(0,i.v_)(e.medicineDetails.medicine_id),1)]),(0,l.Lk)("div",m,[t[30]||(t[30]=(0,l.Lk)("p",{class:"text-dark"},"Generic Name:",-1)),(0,l.Lk)("p",p,(0,i.v_)(e.medicineDetails.generic_name),1)]),(0,l.Lk)("div",b,[t[31]||(t[31]=(0,l.Lk)("p",{class:"text-dark"},"Brand Name:",-1)),(0,l.Lk)("p",k,(0,i.v_)(e.medicineDetails.brand_name),1)]),(0,l.Lk)("div",_,[t[32]||(t[32]=(0,l.Lk)("p",{class:"text-dark"},"Classification:",-1)),(0,l.Lk)("p",v,(0,i.v_)(e.medicineDetails.med_classification),1)]),(0,l.Lk)("div",x,[t[33]||(t[33]=(0,l.Lk)("p",{class:"text-dark"},"Dosage Form:",-1)),(0,l.Lk)("p",f,(0,i.v_)(e.medicineDetails.dosage_form),1)]),(0,l.Lk)("div",y,[t[34]||(t[34]=(0,l.Lk)("p",{class:"text-dark"},"Dosage Strength:",-1)),(0,l.Lk)("p",g,(0,i.v_)(e.medicineDetails.dosage_strength),1)]),(0,l.Lk)("div",h,[t[35]||(t[35]=(0,l.Lk)("p",{class:"text-dark"},"PTR Number:",-1)),(0,l.Lk)("p",q,(0,i.v_)(e.medicineDetails.ptr_number),1)]),(0,l.Lk)("div",L,[t[36]||(t[36]=(0,l.Lk)("p",{class:"text-dark"},"Batch/Lot Number:",-1)),(0,l.Lk)("p",R,(0,i.v_)(e.medicineDetails.batch_lot_number),1)]),(0,l.Lk)("div",w,[t[37]||(t[37]=(0,l.Lk)("p",{class:"text-dark"},"Manufacturing Date:",-1)),(0,l.Lk)("p",F,(0,i.v_)(e.medicineDetails.mfg_date),1)]),(0,l.Lk)("div",D,[t[38]||(t[38]=(0,l.Lk)("p",{class:"text-dark"},"Expiration Date:",-1)),(0,l.Lk)("p",V,(0,i.v_)(e.medicineDetails.exp_date),1)]),(0,l.Lk)("div",M,[t[39]||(t[39]=(0,l.Lk)("p",{class:"text-dark"},"Date Added:",-1)),(0,l.Lk)("p",C,(0,i.v_)(e.medicineDetails.date_added),1)]),(0,l.Lk)("div",A,[t[40]||(t[40]=(0,l.Lk)("p",{class:"text-dark"},"Quantity Received:",-1)),(0,l.Lk)("p",E,(0,i.v_)(e.medicineDetails.quantity),1)]),(0,l.Lk)("div",U,[t[41]||(t[41]=(0,l.Lk)("p",{class:"text-dark"},"Quantity Released:",-1)),(0,l.Lk)("p",S,(0,i.v_)(e.medicineDetails.quantity_released),1)]),(0,l.Lk)("div",I,[t[42]||(t[42]=(0,l.Lk)("p",{class:"text-dark"},"Available In Stock:",-1)),(0,l.Lk)("p",N,(0,i.v_)(e.medicineDetails.in_stock),1)]),(0,l.Lk)("div",j,[t[43]||(t[43]=(0,l.Lk)("p",{class:"text-dark"},"Procured By:",-1)),(0,l.Lk)("p",K,(0,i.v_)(e.medicineDetails.procured_by),1)]),(0,l.Lk)("div",Q,[t[44]||(t[44]=(0,l.Lk)("p",{class:"text-dark"},"Status:",-1)),(0,l.Lk)("p",P,(0,i.v_)(e.status_list[e.medicineDetails.status]),1)])]),(0,l.Lk)("div",T,[t[59]||(t[59]=(0,l.Lk)("p",{class:"text-primary text-center text-weight-bold text-24"}," MEDICINE RELEASE ",-1)),(0,l.Lk)("div",Y,[(0,l.Lk)("div",null,[(0,l.bF)(Le,{dense:"",outline:"",color:"primary",label:"Filters","icon-right":"eva-funnel-outline","no-caps":"",class:"button-120 q-mr-lg"},{default:(0,l.k6)((()=>[(0,l.bF)(Ce,null,{default:(0,l.k6)((()=>[(0,l.bF)(Me,{class:"q-pa-md dialog-card width-500"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",W,[(0,l.Lk)("div",X,[t[45]||(t[45]=(0,l.Lk)("label",{class:"text-primary text-weight-bold"},"Department",-1)),(0,l.bF)(we,{modelValue:e.select_all_dept,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.select_all_dept=t),e.select_all_dept_change],label:"Select All",class:"text-dark",size:"xs"},null,8,["modelValue","onUpdate:modelValue"]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filtersDepartment,((a,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i},[(0,l.bF)(we,{modelValue:e.selectedFiltersDepartment,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedFiltersDepartment=t),val:i+1,label:a,size:"xs",class:"text-dark",disable:e.dept_checkbox_disable},null,8,["modelValue","val","label","disable"])])))),128))]),(0,l.Lk)("div",O,[t[46]||(t[46]=(0,l.Lk)("label",{class:"text-primary text-weight-bold"},"Released To",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.releaseTo,((a,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i},[(0,l.bF)(we,{modelValue:e.selectedReleaseTo,"onUpdate:modelValue":t[3]||(t[3]=t=>e.selectedReleaseTo=t),val:i,label:a,size:"xs",class:"text-dark"},null,8,["modelValue","val","label"])])))),128)),t[47]||(t[47]=(0,l.Lk)("label",{class:"text-primary text-weight-bold q-pt-md"},"Status",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.filterStatus,((a,i)=>((0,l.uX)(),(0,l.CE)("div",{key:i},[(0,l.bF)(we,{modelValue:e.selectedFilterStatus,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedFilterStatus=t),val:i,label:a,size:"xs",class:"text-dark"},null,8,["modelValue","val","label"])])))),128))])]),(0,l.Lk)("div",z,[(0,l.Lk)("div",B,[t[48]||(t[48]=(0,l.Lk)("label",{class:"text-weight-bold text-primary"},"Quantity",-1)),(0,l.Lk)("div",$,[(0,l.bF)(Fe,{dense:"",outlined:"","input-style":{color:"#525252"},hint:"From",class:"q-mt-sm",modelValue:e.quantityReleased[0],"onUpdate:modelValue":t[5]||(t[5]=t=>e.quantityReleased[0]=t)},null,8,["modelValue"]),(0,l.bF)(Fe,{dense:"",outlined:"","input-style":{color:"#525252"},hint:"To",class:"q-mt-sm",modelValue:e.quantityReleased[1],"onUpdate:modelValue":t[6]||(t[6]=t=>e.quantityReleased[1]=t)},null,8,["modelValue"])])]),(0,l.Lk)("div",H,[t[50]||(t[50]=(0,l.Lk)("label",{class:"text-weight-bold text-primary"},"Date Released",-1)),(0,l.Lk)("div",G,[(0,l.bF)(Fe,{dense:"",outlined:"",hint:"From","input-style":{color:"#525252"},class:"q-mt-sm width-150",modelValue:e.dateReleased[0],"onUpdate:modelValue":t[8]||(t[8]=t=>e.dateReleased[0]=t)},{append:(0,l.k6)((()=>[(0,l.bF)(Re,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(Ve,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(De,{mask:"YYYY-MM-DD",modelValue:e.dateReleased[0],"onUpdate:modelValue":t[7]||(t[7]=t=>e.dateReleased[0]=t)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),t[49]||(t[49]=(0,l.Lk)("div",{class:"line"},null,-1)),(0,l.bF)(Fe,{dense:"",outlined:"",hint:"To","input-style":{color:"#525252"},class:"q-mt-sm width-150",modelValue:e.dateReleased[1],"onUpdate:modelValue":t[10]||(t[10]=t=>e.dateReleased[1]=t)},{append:(0,l.k6)((()=>[(0,l.bF)(Re,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,l.k6)((()=>[(0,l.bF)(Ve,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(De,{mask:"YYYY-MM-DD",modelValue:e.dateReleased[1],"onUpdate:modelValue":t[9]||(t[9]=t=>e.dateReleased[1]=t)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(Le,{dense:"",color:"primary",label:"Search","icon-right":"eva-search-outline","no-caps":"",class:"button-120",onClick:e.search},null,8,["onClick"])]),(0,l.bF)(Se,{modelValue:e.isAddNewMedicineRelease,"onUpdate:modelValue":t[18]||(t[18]=t=>e.isAddNewMedicineRelease=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(Me,{class:"width-700"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",J,[(0,l.Lk)("div",Z,[(0,l.bo)((0,l.bF)(Le,{dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,512),[[Ye]])]),t[56]||(t[56]=(0,l.Lk)("p",{class:"text-primary text-center text-weight-bold text-24"}," MEDICINE RELEASE ",-1)),(0,l.bF)(Ue,{onSubmit:e.addReleaseRecord,onReset:e.onReset},{default:(0,l.k6)((()=>[(0,l.Lk)("div",ee,[(0,l.bF)(Ae,{modelValue:e.selectedReleaseCategory,"onUpdate:modelValue":[t[11]||(t[11]=t=>e.selectedReleaseCategory=t),e.onChangeUserPatient],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"patient",label:"Patient",class:"text-dark q-mr-md"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(Ae,{modelValue:e.selectedReleaseCategory,"onUpdate:modelValue":[t[12]||(t[12]=t=>e.selectedReleaseCategory=t),e.onChangeUserPatient],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"others",label:"Doctor/Dentist/Midwife/Staff",class:"text-dark"},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",te,["patient"===e.selectedReleaseCategory?((0,l.uX)(),(0,l.CE)("div",ae,[t[51]||(t[51]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Patient ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{outlined:"","hide-bottom-space":"",modelValue:e.newMedicineRelease.patient_id,"onUpdate:modelValue":t[13]||(t[13]=t=>e.newMedicineRelease.patient_id=t),onFilter:e.patientFilterFunction,"option-label":"patient_name","option-value":"patient_id",options:e.patientOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",class:"q-mt-sm",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules"])])):((0,l.uX)(),(0,l.CE)("div",le,[t[52]||(t[52]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Doctor/ Dentist/ Midwife/ Staff ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{outlined:"","hide-bottom-space":"",modelValue:e.newMedicineRelease.doctor_id,"onUpdate:modelValue":[t[14]||(t[14]=t=>e.newMedicineRelease.doctor_id=t),e.findDepartment],onFilter:e.userFilterFunction,"option-label":"user_name","option-value":"user_id",options:e.userOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",class:"q-mt-sm",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules","onUpdate:modelValue"])])),(0,l.Lk)("div",ie,[t[53]||(t[53]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Medicine ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Fe,{"hide-bottom-space":"",dense:"",outlined:"",class:"q-mt-sm",disable:"",modelValue:e.newMedicineRelease.medicine_id,"onUpdate:modelValue":t[15]||(t[15]=t=>e.newMedicineRelease.medicine_id=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","rules"])])]),(0,l.Lk)("div",se,[(0,l.Lk)("div",de,[t[54]||(t[54]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Department "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{"hide-bottom-space":"",disable:"patient"!==e.selectedReleaseCategory,options:e.filtersDepartment,dense:"",outlined:"",class:"q-mt-sm",modelValue:e.newMedicineRelease.department,"onUpdate:modelValue":t[16]||(t[16]=t=>e.newMedicineRelease.department=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["disable","options","modelValue","rules"])]),(0,l.Lk)("div",ne,[t[55]||(t[55]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Quantity "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Fe,{"hide-bottom-space":"",dense:"",outlined:"",placeholder:"ex. 3","input-style":{color:"#525252"},class:"q-mt-sm",modelValue:e.newMedicineRelease.quantity,"onUpdate:modelValue":t[17]||(t[17]=t=>e.newMedicineRelease.quantity=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","rules"])])]),(0,l.Lk)("div",oe,[(0,l.bF)(Le,{color:"primary",label:"Submit",type:"submit","no-caps":"",class:"button-120 q-mr-lg"}),(0,l.bF)(Le,{outline:"",color:"primary",label:"Reset",type:"reset","no-caps":"",class:"button-120"})])])),_:1},8,["onSubmit","onReset"])])])),_:1})])),_:1},8,["modelValue"])]),(0,l.Lk)("div",ce,[(0,l.bF)(Pe,{columns:e.columns,rows:e.MedicineRelease,pagination:{rowsPerPage:10},"rows-per-page-options":[5,10,15,20,0],loading:e.loading,flat:"",dense:"",class:"mhc-table"},{"body-cell-action":(0,l.k6)((a=>[(0,l.bF)(Ke,{props:a},{default:(0,l.k6)((()=>[e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level?((0,l.uX)(),(0,l.Wv)(Le,{key:0,dense:"",color:"primary",label:"Action","icon-right":"more_vert","no-caps":"",unelevated:"",class:"button-100 action-btn"},{default:(0,l.k6)((()=>[(0,l.bF)(Ce,{"transition-show":"jump-down","transition-hide":"jump-up",class:"width-200"},{default:(0,l.k6)((()=>[(0,l.bF)(je,{separator:"",dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(Ne,{clickable:"",class:"drop-list",onClick:t=>e.openEditModal(a.row)},{default:(0,l.k6)((()=>[(0,l.bF)(Ie,null,{default:(0,l.k6)((()=>t[57]||(t[57]=[(0,l.eW)("Edit Details")]))),_:1}),(0,l.bF)(Ie,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(Re,{size:"xs",name:"eva-edit-outline"})])),_:1})])),_:2},1032,["onClick"]),(0,l.bF)(Ne,{clickable:"",class:"drop-list-delete",onClick:t=>e.openDialog(a.row.med_release_id)},{default:(0,l.k6)((()=>[(0,l.bF)(Ie,null,{default:(0,l.k6)((()=>t[58]||(t[58]=[(0,l.eW)("Delete Record")]))),_:1}),(0,l.bF)(Ie,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(Re,{size:"xs",name:"eva-trash-2-outline"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,l.Q3)("",!0)])),_:2},1032,["props"])])),"header-cell-action":(0,l.k6)((t=>[(0,l.bF)(Qe,{props:t},{default:(0,l.k6)((()=>[(0,l.bF)(Le,{dense:"",label:"Download","no-caps":"","icon-right":"eva-download-outline",color:"primary",class:"button-100 download-btn",disable:!e.MedicineRelease||!e.MedicineRelease[0],onClick:e.exportTable},null,8,["disable","onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","loading"])])])]),(0,l.bF)(Se,{modelValue:e.isEditMedicineRelease,"onUpdate:modelValue":t[26]||(t[26]=t=>e.isEditMedicineRelease=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(Me,{class:"width-700"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",re,[(0,l.Lk)("div",ue,[(0,l.bo)((0,l.bF)(Le,{dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,512),[[Ye]])]),t[65]||(t[65]=(0,l.Lk)("p",{class:"text-primary text-center text-weight-bold text-24"}," EDIT MEDICINE RELEASE ",-1)),(0,l.bF)(Ue,{onSubmit:e.editMedicineRelease},{default:(0,l.k6)((()=>[(0,l.Lk)("div",me,[(0,l.bF)(Ae,{modelValue:e.selectedReleaseCategory,"onUpdate:modelValue":[t[19]||(t[19]=t=>e.selectedReleaseCategory=t),e.onChangeUserPatient],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"patient",label:"Patient",class:"text-dark q-mr-md"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(Ae,{modelValue:e.selectedReleaseCategory,"onUpdate:modelValue":[t[20]||(t[20]=t=>e.selectedReleaseCategory=t),e.onChangeUserPatient],"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"others",label:"Doctor/Dentist/Midwife/Staff",class:"text-dark"},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Lk)("div",pe,["patient"===e.selectedReleaseCategory?((0,l.uX)(),(0,l.CE)("div",be,[t[60]||(t[60]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Patient ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{outlined:"","hide-bottom-space":"",modelValue:e.newMedicineRelease.patient_id,"onUpdate:modelValue":t[21]||(t[21]=t=>e.newMedicineRelease.patient_id=t),onFilter:e.patientFilterFunction,"option-label":"patient_name","option-value":"patient_id",options:e.patientOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",class:"q-mt-sm",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules"])])):((0,l.uX)(),(0,l.CE)("div",ke,[t[61]||(t[61]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("User ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{outlined:"","hide-bottom-space":"",modelValue:e.newMedicineRelease.doctor_id,"onUpdate:modelValue":[t[22]||(t[22]=t=>e.newMedicineRelease.doctor_id=t),e.findDepartment],onFilter:e.userFilterFunction,"option-label":"user_name","option-value":"user_id",options:e.userOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",class:"q-mt-sm",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules","onUpdate:modelValue"])])),(0,l.Lk)("div",_e,[t[62]||(t[62]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Medicine ID "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Fe,{"hide-bottom-space":"",dense:"",outlined:"","input-style":{color:"#525252"},class:"q-mt-sm bg-grey-4",disable:"",modelValue:e.newMedicineRelease.medicine_id,"onUpdate:modelValue":t[23]||(t[23]=t=>e.newMedicineRelease.medicine_id=t)},null,8,["modelValue"])])]),(0,l.Lk)("div",ve,[(0,l.Lk)("div",xe,[t[63]||(t[63]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Department "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Ee,{"hide-bottom-space":"",disable:"patient"!==e.selectedReleaseCategory,options:e.filtersDepartment,dense:"",outlined:"",class:"q-mt-sm",modelValue:e.newMedicineRelease.department,"onUpdate:modelValue":t[24]||(t[24]=t=>e.newMedicineRelease.department=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["disable","options","modelValue","rules"])]),(0,l.Lk)("div",fe,[t[64]||(t[64]=(0,l.Lk)("label",{class:"text-dark"},[(0,l.eW)("Quantity "),(0,l.Lk)("span",{class:"text-negative"},"*")],-1)),(0,l.bF)(Fe,{"hide-bottom-space":"",dense:"",outlined:"",placeholder:"ex. 3","input-style":{color:"#525252"},class:"q-mt-sm",modelValue:e.newMedicineRelease.quantity,"onUpdate:modelValue":t[25]||(t[25]=t=>e.newMedicineRelease.quantity=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["modelValue","rules"])])]),(0,l.Lk)("div",ye,[(0,l.bF)(Le,{color:"primary",label:"Submit",type:"submit","no-caps":"",class:"button-120 q-mr-lg"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(Te,{content:e.$options.components.DeleteMedicineConfirmation},null,8,["content"])])}a(939),a(4520),a(7049);var he=a(4187),qe=a(3877),Le=a(4202),Re=a(1408),we=a(8822),Fe=a(8564),De=a(3022),Ve=a(3328),Me=a(891),Ce=a(455),Ae=a(5278),Ee=a(6091),Ue=a(662),Se=a(2222),Ie=a(1497);const Ne={components:{MHCDialog:Ue.A,DeleteMedicineConfirmation:Ae.A},setup(){const e=(0,De.A)(),t=(0,Ce.lq)(),a=(0,Ce.rd)();let i=Ve.A.getItem("cred");NaN!=i&&null!=i||a.push({name:"login"}),Fe.A.show(),(0,Le.i)(t.params.medicine_id).then((e=>{Fe.A.hide()}));let s=(0,he.KR)({});(0,l.wB)((()=>qe.cloneDeep(Le.xi.value)),(()=>{s.value={medicine_id:t.params.medicine_id,generic_name:Le.xi.value.generic_name,brand_name:Le.xi.value.brand_name,med_classification:Le.xi.value.med_classification,dosage_form:Le.xi.value.dosage_form,dosage_strength:Le.xi.value.dosage_strength,ptr_number:Le.xi.value.ptr_number,batch_lot_number:Le.xi.value.batch_lot_number,mfg_date:Le.xi.value.mfg_date,exp_date:Le.xi.value.exp_date,date_added:Le.xi.value.date_added,quantity:Le.xi.value.quantity,quantity_released:Le.xi.value.quantity_released,in_stock:Le.xi.value.quantity-Le.xi.value.quantity_released,procured_by:Le.xi.value.procured_by,status:Le.xi.value.status}}));let d=["Active","Deleted"];const n=(0,he.KR)([{name:"med_release_id",align:"left",label:"Release ID",field:"med_release_id",sortable:!0},{name:"medicine_id",align:"left",label:"Medicine ID",field:"medicine_id",sortable:!0,classes:"hidden",headerClasses:"hidden"},{name:"name",align:"left",label:"Name",field:e=>e.patient_id?e.patient_name:e.doctor_name,sortable:!0},{name:"department",align:"left",label:"Department",field:e=>o[e.department-1],sortable:!0},{name:"quantity",align:"left",label:"Quantity",field:"quantity",sortable:!0},{name:"date",align:"left",label:"Date",field:"release_date",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!0,classes:"hidden",headerClasses:"hidden"},{name:"action",align:"left",label:"",field:"action",sortable:!1}]);let o=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"],c=(0,he.KR)([]),r=(0,he.KR)(!0),u=(0,he.KR)(!1);!0===r.value?(o.forEach(((e,t)=>{c.value.push(t+1)})),u.value=!0):(c.value=[],u.value=!1);const m=()=>{!0===r.value?o.forEach(((e,t)=>{c.value.push(t+1)})):(c.value=[],u.value=!1)};let p=(0,he.KR)(["Patients","Staff"]),b=(0,he.KR)([0,1]),k=(0,he.KR)(["Active","Deleted"]),_=(0,he.KR)([0]),v=(0,he.KR)([0,1e3]),x=(0,he.KR)([]),f=(0,he.KR)(!1),y={medicine_id:t.params.medicine_id,department:c.value,released_to:b.value,status:_.value,quantity_released:v.value,date_release:x.value};(0,Le.d1)(y);const g=()=>{f.value=!0;let e={medicine_id:t.params.medicine_id,department:c.value,released_to:b.value,status:_.value,quantity_released:v.value,date_release:x.value};(0,Le.d1)(e).then((e=>{f.value=!1}))};let h=(0,he.KR)(!1),q=(0,he.KR)("patient"),L=(0,he.KR)(null),R=(0,he.KR)({medicine_id:t.params.medicine_id,patient_id:null,doctor_id:null,department:null,quantity:null,released_by:i&&i.user_id,release_date:Me.Ay.formatDate(new Date,"YYYY-MM-DD")});const w=()=>{null!==R.value.doctor_id?(0,we.ol)(R.value.doctor_id).then((e=>{R.value.department=o[e.data[0].department-1]})):R.value.department=null},F=()=>{R.value={medicine_id:t.params.medicine_id,patient_id:null,doctor_id:null,department:null,quantity:null,released_by:i&&i.user_id,release_date:Me.Ay.formatDate(new Date,"YYYY-MM-DD")},L.value=null},D=()=>{R.value.department=o.indexOf(R.value.department)+1,console.log(R.value),Fe.A.show(),(0,Le.bJ)(R.value).then((a=>{let l="success"===a.status?0:1;e.notify({type:0===l?"positive":"negative",classes:"text-white",message:0===l?"Medicine release record added successfully":"Failed to add medicine release record"}),(0,Le.i)(t.params.medicine_id).then((e=>{Fe.A.hide()})),0===l&&F(),h.value=!1}))};let V=(0,he.KR)(!1);const M=e=>{V.value=!0,q.value=null!==e.patient_id&&""!==e.patient_id?"patient":"others",R.value={med_release_id:e.med_release_id,medicine_id:t.params.medicine_id,patient_id:e.patient_id,doctor_id:e.doctor_id,department:o[e.department-1],quantity:e.quantity,released_by:e.released_by,release_date:e.release_date}},C=()=>{R.value.department=null,R.value.patient_id=null,R.value.doctor_id=null};let A=(0,he.KR)([]);const E=(e,t,a)=>{e&&(e.length>5||!isNaN(e))?t((()=>{if(isNaN(e)){const t=String(e.toLowerCase());(0,Re.qi)({name_string:t}).then((e=>{if(A.value=[],"success"===e.status){let t=(0,he.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={patient_name:e.patient_id+" - "+e.name,patient_id:e.patient_id};A.value.push(t)}))}}))}else(0,Re.qi)({id_string:e}).then((e=>{if(A.value=[],"success"===e.status){let t=(0,he.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={patient_name:e.patient_id+" - "+e.name,patient_id:e.patient_id};A.value.push(t)}))}}))})):a()};let U=(0,he.KR)([]);const S=(e,t,a)=>{e.length>5||!isNaN(e)?t((()=>{if(isNaN(e)){const t=String(e.toLowerCase());(0,we.i4)(t).then((e=>{if(U.value=[],"success"===e.status){let t=(0,he.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};U.value.push(t)}))}}))}else(0,we.Wh)(e).then((e=>{if(U.value=[],"success"===e.status){let t=(0,he.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};U.value.push(t)}))}}))})):a()},I=()=>{R.value.department=o.indexOf(R.value.department)+1,(0,Le.M4)(R.value).then((a=>{let l="success"===a.status?0:1;e.notify({type:0===l?"positive":"negative",classes:"text-white",message:0===l?"Medicine release record edited successfully":"Failed to edit medicine release record"}),(0,Le.i)(t.params.medicine_id).then((e=>{Fe.A.hide()})),V.value=!1}))},N=e=>{(0,Se.b)({med_release_id:e,medicine_id:t.params.medicine_id}),(0,Ee.o)()},j=(e,t,a)=>{let l=void 0!==t?t(e,a):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`},K=()=>{const a=[n.value.map((e=>j(e.label)))].concat(Le.Kv.value.map((e=>n.value.map((t=>j("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format,e))).join(",")))).join("\r\n"),l=(0,Ie.A)("Medicine Release for Medicine ID "+t.params.medicine_id+" Records.csv",a,"text/csv");!0!==l&&e.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return{columns:n,isAddNewMedicineRelease:h,selectedReleaseCategory:q,filtersDepartment:o,selectedFiltersDepartment:c,releaseTo:p,selectedReleaseTo:b,filterStatus:k,selectedFilterStatus:_,MedicineDetails:Le.xi,MedicineRelease:Le.Kv,medicineDetails:s,status_list:d,select_all_dept_change:m,dept_checkbox_disable:u,select_all_dept:r,loading:f,quantityReleased:v,dateReleased:x,search:g,openDialog:N,exportTable:K,newMedicineRelease:R,patient_doctor_id:L,addReleaseRecord:D,onReset:F,isEditMedicineRelease:V,newMedicineRelease:R,openEditModal:M,editMedicineRelease:I,patientFilterFunction:E,patientOptions:A,userFilterFunction:S,userOptions:U,keySession:i,onChangeUserPatient:C,findDepartment:w}}};var je=a(2968),Ke=a(1244),Qe=a(3933),Pe=a(5389),Te=a(3341),Ye=a(7328),We=a(6067),Xe=a(8360),Oe=a(5626),ze=a(45),Be=a(3417),$e=a(9647),He=a(9549),Ge=a(1263),Je=a(8785),Ze=a(3766),et=a(2589),tt=a(4958),at=a(2517),lt=a(8657),it=a(272),st=a.n(it);const dt=(0,je.A)(Ne,[["render",ge],["__scopeId","data-v-579eee34"]]),nt=dt;st()(Ne,"components",{QBtn:Ke.A,QIcon:Qe.A,QMenu:Pe.A,QCard:Te.A,QCheckbox:Ye.A,QInput:We.A,QPopupProxy:Xe.A,QDate:Oe.A,QDialog:ze.A,QForm:Be.A,QRadio:$e.A,QSelect:He.A,QTable:Ge.A,QTd:Je.A,QList:Ze.A,QItem:et.A,QItemSection:tt.A,QTh:at.A}),st()(Ne,"directives",{ClosePopup:lt.A})}}]);