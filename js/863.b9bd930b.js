"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[863],{5863:(e,l,a)=>{a.r(l),a.d(l,{default:()=>oe});var t=a(1347),s=a(7763);const n={class:"supply-inventory"},i={class:"flex justify-between items-center q-px-md q-pt-none"},u={class:"flex justify-start items-center"},o={class:"row q-px-lg"},d=["onClick"],p={class:"right-panel col q-ml-sm q-px-xl q-py-lg"},r={key:0,style:{"justify-content":"center","align-items":"center"}},m={class:"text-center"},c={class:"q-my-none text-primary text-bold"},y={class:"q-mt-md text-bold text-grey-7 text-h5"},v={class:"q-mt-md"},k={class:"q-mt-md text-center q-my-none text-primary text-bold"},b={class:"row"},h={key:0,class:"col-1 text-dark",style:{visibility:"hidden"}},x={class:"row q-mb-sm"},_={class:"flex q-mt-md",style:{"justify-content":"center"}},g={class:"q-pa-lg"},q={class:"flex justify-end"},f={class:"text-primary text-weight-bold text-24 text-center q-mb-xl"},S={class:"flex justify-between items-center q-mt-sm"},D={class:"q-pa-lg"},F={class:"flex justify-end"},R={class:"text-primary text-weight-bold text-24 text-center q-mb-xl"},C={class:"row q-mt-sm"},A={class:"col q-mr-md"},L={class:"col-5"},V={key:0},w={class:"q-mb-md"},Q={class:"row"},E={key:0,class:"col-1 text-dark",style:{visibility:"hidden"}},U={class:"row q-mb-sm"};function X(e,l,a,X,K,P){const T=(0,t.g2)("q-btn"),W=(0,t.g2)("q-select"),I=(0,t.g2)("q-separator"),N=(0,t.g2)("q-scroll-area"),Y=(0,t.g2)("q-input"),M=(0,t.g2)("q-icon"),O=(0,t.g2)("q-form"),j=(0,t.g2)("q-date"),z=(0,t.g2)("q-popup-proxy"),$=(0,t.g2)("q-card"),B=(0,t.g2)("q-dialog"),G=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",i,[(0,t.Lk)("div",u,[(0,t.bF)(T,{round:"",outline:"",dense:"",icon:"eva-arrow-back-outline",color:"dark",class:"q-mr-md",onClick:l[0]||(l[0]=l=>e.$router.go(-1))}),l[11]||(l[11]=(0,t.Lk)("h5",{class:"text-dark text-weight-bold"},"SUPPLY RELEASE",-1))]),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level?((0,t.uX)(),(0,t.Wv)(T,{key:0,outline:"",label:"Release Supplies","icon-right":"fa fa-boxes-packing","no-caps":"",color:"primary",class:"q-ml-xs",onClick:l[1]||(l[1]=l=>e.isSupplyRelease=!e.isSupplyRelease)})):(0,t.Q3)("",!0)]),(0,t.Lk)("div",null,[(0,t.Lk)("div",o,[(0,t.Lk)("div",{class:"col-4 q-pa-md q-mr-sm left-panel",style:(0,s.Tr)({height:e.$q.screen.height-180+"px"})},[(0,t.Lk)("div",null,[(0,t.bF)(W,{dense:"",outlined:"","input-class":"text-primary text-bold",options:e.pendingDateArray,modelValue:e.selectedPendingDate,"onUpdate:modelValue":[l[2]||(l[2]=l=>e.selectedPendingDate=l),e.changeDate],style:{"min-width":"100px"}},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,t.bF)(I,{color:"primary",class:"q-my-md"}),e.pendingArray.length>0?((0,t.uX)(),(0,t.Wv)(N,{key:0,style:(0,s.Tr)({height:e.$q.screen.height-300+"px"})},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.pendingArray,((l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"row q-mb-sm"},[(0,t.Lk)("div",{class:"q-px-md q-py-sm row cursor-pointer record-card",style:(0,s.Tr)(null!==e.selectedIndex&&e.selectedIndex===a?"background-color: #5f8d4e; color: white":"background-color: white; color: #5f8d4e"),onClick:l=>e.selectPendingRecord(a)},(0,s.v_)(l.first_name+" "+(l.middle_name?l.middle_name+" ":" ")+l.last_name+" "+(l.suffix?l.suffix:"")),13,d)])))),128))])),_:1},8,["style"])):(0,t.Q3)("",!0)],4),(0,t.Lk)("div",p,[e.pendingArray.length>0?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",m,[(0,t.Lk)("h4",c,(0,s.v_)(e.selectedRelease.first_name+" "+(e.selectedRelease.middle_name?e.selectedRelease.middle_name+" ":" ")+e.selectedRelease.last_name+" "+(e.selectedRelease.suffix?e.selectedRelease.suffix:"")),1),(0,t.Lk)("label",y,(0,s.v_)(e.departments[e.selectedRelease.department-1]),1)]),(0,t.bF)(N,{style:(0,s.Tr)({height:e.$q.screen.height-330+"px"}),class:"q-mt-md"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",v,[(0,t.Lk)("h6",k,[l[12]||(l[12]=(0,t.eW)(" Supply Release ")),e.keySession&&4===e.keySession.department?((0,t.uX)(),(0,t.Wv)(T,{key:0,outline:"",dense:"","no-caps":"",label:"Add",icon:"add_circle",color:"primary",class:"q-px-md q-ml-md",onClick:e.addSupply},null,8,["onClick"])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",b,[l[13]||(l[13]=(0,t.Lk)("label",{class:"col text-dark text-bold q-mr-md"},"Supply Name",-1)),l[14]||(l[14]=(0,t.Lk)("label",{class:"col-1 text-dark text-bold q-mr-md"},"Quantity",-1)),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedRelease.supplies.length>1?((0,t.uX)(),(0,t.CE)("label",h,"Quantity")):(0,t.Q3)("",!0)]),(0,t.bF)(O,{onSubmit:e.editSupplyRelease},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.selectedRelease.supplies,((l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"q-mt-md"},[(0,t.Lk)("div",x,[(0,t.bF)(W,{readonly:e.keySession&&(4!==e.keySession.department||3===e.keySession.permission_level),modelValue:l.supply_details,"onUpdate:modelValue":[e=>l.supply_details=e,e.buttonCondition],dense:"",outlined:"","use-input":"","map-options":"",options:e.supplyList,onFilter:e.supplyFilterFunction,"option-label":"supply_name","option-value":"supply_id",class:"col q-mr-md","hide-bottom-space":"",rules:[e=>e||""],label:l.release_date?l.release_date:""},null,8,["readonly","modelValue","onUpdate:modelValue","options","onFilter","rules","label"]),(0,t.bF)(Y,{readonly:e.keySession&&(4!==e.keySession.department||3===e.keySession.permission_level),dense:"",outlined:"",class:"col-1 q-mr-md","input-class":"text-dark",modelValue:l.quantity,"onUpdate:modelValue":[e=>l.quantity=e,e.buttonCondition],"hide-bottom-space":"",rules:[e=>e&&!isNaN(e)||""]},null,8,["readonly","modelValue","onUpdate:modelValue","rules"]),e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.selectedRelease.supplies.length>1?((0,t.uX)(),(0,t.Wv)(M,{key:0,name:"delete",color:"negative",class:"col-1 cursor-pointer",size:"30px",onClick:l=>e.removeSupply(a)},null,8,["onClick"])):(0,t.Q3)("",!0)])])))),128)),(0,t.Lk)("div",_,[e.keySession&&4===e.keySession.department&&3!==e.keySession.permission_level&&e.btnCondition?((0,t.uX)(),(0,t.Wv)(T,{key:0,"no-caps":"",color:"primary",type:"submit",label:"Submit",class:"q-mr-xs",style:{width:"100px"}})):(0,t.Q3)("",!0)])])),_:1},8,["onSubmit"])])])),_:1},8,["style"])])):(0,t.Q3)("",!0)])])]),(0,t.bF)(B,{modelValue:e.isCustomDate,"onUpdate:modelValue":l[7]||(l[7]=l=>e.isCustomDate=l),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)($,{style:{width:"500px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",g,[(0,t.Lk)("div",q,[(0,t.bF)(T,{onClick:e.closeCustomDate,dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,8,["onClick"])]),(0,t.Lk)("p",f,[(0,t.bF)(M,{name:"calendar_month",class:"q-mr-xs q-gutter-xs"}),l[15]||(l[15]=(0,t.eW)(" SELECT CUSTOM DATES "))]),(0,t.Lk)("div",S,[(0,t.bF)(Y,{dense:"",outlined:"",hint:"From",class:"width-150",modelValue:e.dateArray[0],"onUpdate:modelValue":l[4]||(l[4]=l=>e.dateArray[0]=l),readonly:""},{append:(0,t.k6)((()=>[(0,t.bF)(M,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{modelValue:e.dateArray[0],"onUpdate:modelValue":[l[3]||(l[3]=l=>e.dateArray[0]=l),e.changeCustomDate],mask:"YYYY-MM-DD",options:l=>l<=e.dateToday},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),l[16]||(l[16]=(0,t.Lk)("div",{class:"line"},null,-1)),(0,t.bF)(Y,{dense:"",outlined:"",hint:"To",class:"width-150",modelValue:e.dateArray[1],"onUpdate:modelValue":l[6]||(l[6]=l=>e.dateArray[1]=l),readonly:""},(0,t.eX)({_:2},[e.dateArray[0]&&null!==e.dateArray[0]&&""!==e.dateArray[0]?{name:"append",fn:(0,t.k6)((()=>[(0,t.bF)(M,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{modelValue:e.dateArray[1],"onUpdate:modelValue":l[5]||(l[5]=l=>e.dateArray[1]=l),mask:"YYYY-MM-DD",options:l=>l>=e.firstDate&&l<=e.dateToday},null,8,["modelValue","options"])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["modelValue"])]),e.dateArray[0]&&e.dateArray[1]?((0,t.uX)(),(0,t.Wv)(T,{key:0,label:"Select Dates",color:"primary",icon:"done",style:{width:"100%"},class:"q-mt-md",onClick:e.getRecordsFromCustomDate},null,8,["onClick"])):(0,t.Q3)("",!0)])])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(B,{modelValue:e.isSupplyRelease,"onUpdate:modelValue":l[10]||(l[10]=l=>e.isSupplyRelease=l),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)($,{style:{"min-width":"500px","max-width":"750px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",D,[(0,t.Lk)("div",F,[(0,t.bo)((0,t.bF)(T,{dense:"",color:"negative",size:"0.375rem",icon:"eva-close-outline"},null,512),[[G]])]),(0,t.Lk)("p",R,[(0,t.bF)(M,{name:"fa fa-boxes-packing",class:"q-mr-xs q-gutter-xs"}),l[17]||(l[17]=(0,t.eW)(" RELEASE SUPPLIES "))]),(0,t.bF)(O,{onSubmit:e.addSupplyRelease},{default:(0,t.k6)((()=>[(0,t.Lk)("div",C,[(0,t.Lk)("div",A,[l[18]||(l[18]=(0,t.Lk)("label",{class:"text-dark"},[(0,t.eW)("Personnel ID "),(0,t.Lk)("span",{class:"text-negative"},"*")],-1)),(0,t.bF)(W,{outlined:"","hide-bottom-space":"",modelValue:e.supplyReleaseDetails.user_id,"onUpdate:modelValue":[l[8]||(l[8]=l=>e.supplyReleaseDetails.user_id=l),e.findDepartment],onFilter:e.userFilterFunction,"option-label":"user_name","option-value":"user_id",options:e.userOptions,"use-input":"","emit-value":"","map-options":"",dense:"","input-style":"padding: 0","input-class":"text-right text-primary",rules:[e=>e&&(e.length>0||!isNaN(e))||"Required field"]},null,8,["modelValue","onFilter","options","rules","onUpdate:modelValue"])]),(0,t.Lk)("div",L,[l[19]||(l[19]=(0,t.Lk)("label",{class:"text-dark"},[(0,t.eW)("Department "),(0,t.Lk)("span",{class:"text-negative"},"*")],-1)),(0,t.bF)(W,{"hide-bottom-space":"",disable:"",options:e.filtersDepartment,dense:"",outlined:"",modelValue:e.supplyReleaseDetails.department,"onUpdate:modelValue":l[9]||(l[9]=l=>e.supplyReleaseDetails.department=l),rules:[e=>e&&e.length>0||"Required field"]},null,8,["options","modelValue","rules"])])]),(0,t.bF)(I,{class:"q-my-md",color:"primary"}),e.supplyReleaseDetails.user_id&&e.supplyReleaseDetails.department?((0,t.uX)(),(0,t.CE)("div",V,[(0,t.Lk)("div",w,[(0,t.bF)(T,{label:"Add",icon:"add_circle",color:"primary",outline:"","no-caps":"",onClick:e.addSupplyMass},null,8,["onClick"])]),(0,t.Lk)("div",Q,[l[20]||(l[20]=(0,t.Lk)("label",{class:"col text-dark text-bold q-mr-md"},"Supply Name",-1)),l[21]||(l[21]=(0,t.Lk)("label",{class:"col-2 text-dark text-bold q-mr-md"},"Quantity",-1)),e.supplyReleaseDetails.supplies_array.length>1?((0,t.uX)(),(0,t.CE)("label",E,"Quantity")):(0,t.Q3)("",!0)]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.supplyReleaseDetails.supplies_array,((l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a},[(0,t.Lk)("div",U,[(0,t.bF)(W,{modelValue:l.supply_id,"onUpdate:modelValue":e=>l.supply_id=e,dense:"",outlined:"",options:e.supplyList,onFilter:e.supplyFilterFunction,"option-label":"supply_name","option-value":"supply_id","use-input":"","emit-value":"","map-options":"","new-value-mode":"add-unique","hide-bottom-space":"",class:"col q-mr-md",rules:[e=>e||""]},null,8,["modelValue","onUpdate:modelValue","options","onFilter","rules"]),(0,t.bF)(Y,{mask:"######",dense:"",outlined:"",class:"col-2 q-mr-md","input-class":"text-dark",modelValue:l.quantity,"onUpdate:modelValue":e=>l.quantity=e,"hide-bottom-space":"",rules:[e=>e&&!isNaN(e)||""]},null,8,["modelValue","onUpdate:modelValue","rules"]),e.supplyReleaseDetails.supplies_array.length>1?((0,t.uX)(),(0,t.Wv)(M,{key:0,name:"delete",color:"negative",class:"col-1 cursor-pointer",size:"30px",onClick:l=>e.removeSupplyMass(a)},null,8,["onClick"])):(0,t.Q3)("",!0)])])))),128)),(0,t.Lk)("div",null,[(0,t.bF)(T,{label:"Submit",type:"submit","no-caps":"",color:"primary"})])])):(0,t.Q3)("",!0)])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"])])}a(939),a(4520);var K=a(4187),P=(a(3877),a(3022)),T=a(8564),W=a(891),I=a(3328),N=a(9077),Y=a(8822),M=a(455);const O={setup(){const e=(0,M.rd)(),l=((0,M.lq)(),(0,P.A)());let a=I.A.getItem("cred");null===a&&e.push({name:"login"});let t=["Today","This Week","This Month","Custom Date"],s=(0,K.KR)("Today"),n=(0,K.KR)([]),i=(0,K.KR)([]),u=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"],o=(0,K.KR)(null);const d=e=>{o.value=e,n.value=i.value[e],f.value=!0};T.A.show(),(0,N.D7)("Custom Date"!==s.value?s.value:m.value).then((e=>{T.A.hide(),i.value=e.data,o.value=0,n.value=i.value[0]}));let p=(0,K.KR)(!1),r=W.Ay.formatDate(new Date,"YYYY-MM-DD"),m=(0,K.KR)(["2023-01-01",r]),c=(0,K.KR)(null);const y=()=>{c.value=m.value[0].replaceAll("-","/")},v=()=>{"Custom Date"!==s.value?(0,N.D7)(s.value).then((e=>{i.value=e.data,o.value=0,n.value=i.value[0]})):p.value=!0},k=()=>{p.value=!1,s.value="Today",v()},b=()=>{p.value=!1,(0,N.D7)(m.value).then((e=>{i.value=e.data,o.value=0,n.value=i.value[0]}))};let h=(0,K.KR)([]);const x=(e,l,a)=>{e.length>3?l((()=>{const l=String(e.toLowerCase());(0,N.DD)(l).then((e=>{if(h.value=[],"success"===e.status){let l=(0,K.KR)([]);l.value=e.data,l.value.forEach((e=>{let l={supply_name:e.supply_name+(e.exp_date?" ("+e.exp_date+")":"")+" ("+(e.quantity-e.quantity_released)+")",supply_id:e.supply_id};h.value.push(l)}))}}))})):a()},_=()=>{f.value=!1,n.value.supplies.push({supply_details:{supply_name:null,supply_id:null},quantity:null,release_date:r,released_by:a&&a.user_id,status:0})},g=e=>{n.value.supplies.splice(e,1)},q=()=>{n.value.date="Custom Date"!==s.value?s.value:m.value,T.A.show(),(0,N.hn)(n.value).then((e=>{T.A.hide(),n.value=e.data;let a="success"===e.status?0:1;l.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Supply releases edited successfully":"Failed to edit supply releases"})}))};let f=(0,K.KR)(!0);const S=()=>{null!==n.value.supplies[n.value.supplies.length-1].supply_details.supply_name&&null!==n.value.supplies[n.value.supplies.length-1].quantity&&(f.value=!0)};let D=(0,K.KR)(!1),F=(0,K.KR)({user_id:null,department:null,supplies_array:[{supply_id:null,quantity:null}],released_by:a&&a.user_id}),R=(0,K.KR)([]);const C=(e,l,a)=>{e.length>5||!isNaN(e)?l((()=>{if(isNaN(e)){const l=String(e.toLowerCase());(0,Y.i4)(l).then((e=>{if(R.value=[],"success"===e.status){let l=(0,K.KR)([]);l.value=e.data,l.value.forEach((e=>{let l={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};R.value.push(l)}))}}))}else(0,Y.Wh)(e).then((e=>{if(R.value=[],"success"===e.status){let l=(0,K.KR)([]);l.value=e.data,l.value.forEach((e=>{let l={user_name:e.id+" - "+e.user_name,department:e.department,user_id:e.id};R.value.push(l)}))}}))})):a()};let A=["Outpatient Department","Dental","Prenatal and Immunization","Pharmacy","Front Desk","Admin Office"];const L=()=>{null!==F.value.user_id?(0,Y.ol)(F.value.user_id).then((e=>{F.value.department=A[e.data[0].department-1]})):F.value.department=null},V=()=>{F.value.supplies_array.push({supply_id:null,quantity:null})},w=e=>{F.value.supplies_array.splice(e,1)},Q=()=>{F.value.department=A.indexOf(F.value.department)+1,T.A.show(),(0,N._W)(F.value).then((e=>{T.A.hide();let a="success"===e.status?0:1;l.notify({type:0===a?"positive":"negative",classes:"text-white",message:0===a?"Supply releases added successfully":"Failed to add supply releases"}),D.value=!1,T.A.show(),(0,N.D7)("Custom Date"!==s.value?s.value:m.value).then((e=>{T.A.hide(),i.value=e.data,o.value=0,n.value=i.value[0]}))}))};return{keySession:a,pendingDateArray:t,pendingArray:i,selectedIndex:o,selectPendingRecord:d,selectedPendingDate:s,isCustomDate:p,dateArray:m,changeCustomDate:y,changeDate:v,closeCustomDate:k,getRecordsFromCustomDate:b,selectedRelease:n,departments:u,supplyList:h,supplyFilterFunction:x,addSupply:_,removeSupply:g,editSupplyRelease:q,btnCondition:f,buttonCondition:S,isSupplyRelease:D,supplyReleaseDetails:F,userOptions:R,userFilterFunction:C,filtersDepartment:A,findDepartment:L,addSupplyMass:V,removeSupplyMass:w,addSupplyRelease:Q}}};var j=a(2968),z=a(1244),$=a(9549),B=a(6915),G=a(5460),H=a(3417),J=a(6067),Z=a(3933),ee=a(45),le=a(3341),ae=a(8360),te=a(5626),se=a(8657),ne=a(272),ie=a.n(ne);const ue=(0,j.A)(O,[["render",X],["__scopeId","data-v-0947ebea"]]),oe=ue;ie()(O,"components",{QBtn:z.A,QSelect:$.A,QSeparator:B.A,QScrollArea:G.A,QForm:H.A,QInput:J.A,QIcon:Z.A,QDialog:ee.A,QCard:le.A,QPopupProxy:ae.A,QDate:te.A}),ie()(O,"directives",{ClosePopup:se.A})}}]);