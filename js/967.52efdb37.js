"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[967],{6967:(e,t,a)=>{a.r(t),a.d(t,{default:()=>qe});var l=a(1347),s=a(7763);const n={class:"pr-opd-details"},i={class:"flex justify-between items-center q-px-md"},r={class:"flex items-center"},o={key:0},u={key:0,class:"text-center text-grey-7"},d={class:"row"},m={class:"grid card-box q-mx-md q-mb-xl row"},c={class:"col-3 q-pa-md first-col leftSide col",style:{width:"300px"}},p={class:"flex",style:{"justify-content":"center","align-items":"center"}},v={class:"text-primary text-center text-weight-bold p-name"},k={class:"flex justify-between items-center q-mt-sm"},y={class:"text-dark text-bold"},_={class:"text-dark text-bold"},b={class:"text-center text-primary address-details"},x={class:"flex items-center justify-between q-mt-lg"},h={class:"column text-center"},q={class:"text-green-8"},P={class:"column text-center"},D={class:"text-green-8"},g={class:"flex items-center justify-between q-mt-lg"},L={class:"column text-center"},w={class:"text-green-8"},f={class:"column text-center"},C={class:"text-green-8"},R={key:0,class:"flex items-center justify-between q-mt-lg"},A={class:"column text-center"},F={class:"text-green-8"},Q={class:"column text-center"},S={class:"text-green-8"},I={key:1,class:"row justify-center q-mb-sm q-mt-lg"},z={class:"column text-center"},X={class:"text-green-8"},N={class:"row"},O={key:0,class:"col"},E={class:"col"},K={class:"row q-my-md"},j={key:0,class:"col"},V={class:"col"},W={class:"text-center"},$={key:0},T={class:"text-grey-7"},Z={class:"flex q-mt-md",style:{"justify-content":"center","align-items":"center"}},B={class:"text-center"},M={class:"flex q-mt-md",style:{"justify-content":"center","align-items":"center"}};function U(e,t,a,U,H,G){const J=(0,l.g2)("q-btn"),Y=(0,l.g2)("q-separator"),ee=(0,l.g2)("q-select"),te=(0,l.g2)("q-table"),ae=(0,l.g2)("router-view"),le=(0,l.g2)("q-layout"),se=(0,l.g2)("q-icon"),ne=(0,l.g2)("q-card"),ie=(0,l.g2)("q-dialog"),re=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.bF)(J,{round:"",dense:"",outline:"",icon:"eva-arrow-back-outline",color:"dark",onClick:t[0]||(t[0]=t=>e.$router.go(-1)),class:"q-mr-md"}),t[9]||(t[9]=(0,l.Lk)("h5",{class:"text-weight-bold text-dark q-my-lg"},"PATIENT RECORDS",-1))]),e.$route.params.queue?((0,l.uX)(),(0,l.CE)("div",o,[e.keySession&&5!==e.keySession.department?((0,l.uX)(),(0,l.CE)("div",u,t[10]||(t[10]=[(0,l.Lk)("label",null,"Patient Queue",-1)]))):(0,l.Q3)("",!0),(0,l.Lk)("div",d,[(0,l.bF)(J,{"no-caps":"",color:"negative",label:e.keySession&&5!==e.keySession.department?"Remove Patient":"Remove Patient from Queue",icon:"playlist_remove",class:"col",onClick:t[1]||(t[1]=t=>e.isRemoveFromCurrentQueue=!e.isRemoveFromCurrentQueue)},null,8,["label"]),e.keySession&&5!==e.keySession.department?((0,l.uX)(),(0,l.Wv)(J,{key:0,"no-caps":"",color:"primary",label:"Done",icon:"add_task",class:"q-ml-md col",style:{width:"200px"},onClick:t[2]||(t[2]=t=>e.isDonePatient=!e.isDonePatient)})):(0,l.Q3)("",!0)])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",m,[(0,l.Lk)("div",c,[(0,l.Lk)("div",p,[e.keySession&&5===e.keySession.department?((0,l.uX)(),(0,l.Wv)(J,{key:0,class:"q-mt-xs q-mb-xs",icon:"eva-edit-outline",label:"Edit Patient Profile","no-caps":"",color:"primary",onClick:t[3]||(t[3]=t=>e.$router.push({name:"add-edit-patient-record",params:{id:e.PatientDetails.patient_id}}))})):(0,l.Q3)("",!0),(0,l.Lk)("p",v,(0,s.v_)(e.PatientDetails.first_name+(null===e.PatientDetails.middle_name?"":" "+e.PatientDetails.middle_name)+" "+e.PatientDetails.last_name+(null===e.PatientDetails.suffix?"":" "+e.PatientDetails.suffix)),1)]),(0,l.Lk)("div",k,[(0,l.Lk)("p",y,(0,s.v_)(e.PatientDetails.patient_id),1),(0,l.Lk)("p",_,(0,s.v_)(e.status[e.PatientDetails.status]),1)]),(0,l.Lk)("div",null,[(0,l.Lk)("p",b,(0,s.v_)((""!==e.PatientDetails.address_line?e.PatientDetails.address_line+", ":"")+e.PatientDetails.barangay+", "+e.PatientDetails.municipality+", "+e.PatientDetails.province),1)]),(0,l.Lk)("div",x,[(0,l.Lk)("div",h,[(0,l.Lk)("label",q,(0,s.v_)(e.PatientDetails.phone_number),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[11]||(t[11]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Phone Number",-1))]),(0,l.Lk)("div",P,[(0,l.Lk)("label",D,(0,s.v_)(e.sex[e.PatientDetails.sex]),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[12]||(t[12]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Sex",-1))])]),(0,l.Lk)("div",g,[(0,l.Lk)("div",L,[(0,l.Lk)("label",w,(0,s.v_)(e.PatientDetails.birthdate),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[13]||(t[13]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Birth date",-1))]),(0,l.Lk)("div",f,[(0,l.Lk)("label",C,(0,s.v_)(e.PatientDetails.age),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[14]||(t[14]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Age",-1))])]),e.PatientDetails.pwd_id?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",A,[(0,l.Lk)("label",F,(0,s.v_)(null===e.PatientDetails.pwd_id?"":e.PatientDetails.pwd_id),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[15]||(t[15]=(0,l.Lk)("label",{class:"text-dark text-bold"},"PWD ID",-1))]),(0,l.Lk)("div",Q,[(0,l.Lk)("label",S,(0,s.v_)(null===e.PatientDetails.disability?"":e.PatientDetails.disability),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[16]||(t[16]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Disability",-1))])])):(0,l.Q3)("",!0),e.PatientDetails.senior_citizen_id?((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",z,[(0,l.Lk)("label",X,(0,s.v_)(null===e.PatientDetails.senior_citizen_id?"":e.PatientDetails.senior_citizen_id),1),(0,l.bF)(Y,{class:"q-mt-sm q-mb-sm",style:{width:"120px"}}),t[17]||(t[17]=(0,l.Lk)("label",{class:"text-dark text-bold"},"Senior Citizen ID",-1))])])):(0,l.Q3)("",!0),(0,l.bF)(Y,{class:"q-my-lg",color:"dark"}),t[18]||(t[18]=(0,l.Lk)("div",{class:"text-grey-7 text-caption text-center"},[(0,l.Lk)("label",null,"Please select your department")],-1)),(0,l.Lk)("div",N,[!e.PatientRecords||0!==e.PatientRecords.length&&e.PatientRecords[0].date===e.date_today||!e.keySession||4===e.keySession.department||1===e.keySession.department||3===e.keySession.permission_level||e.isbtnDisabled?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",O,[(0,l.bF)(J,{dense:"",color:"primary",outline:"",label:"Create New Record","no-caps":"",size:"sm",padding:"4px 8px",icon:"eva-folder-add-outline",class:"create-btn",disable:!e.keySession||3===e.keySession.permission_level||null===e.selectedDepartment,onClick:t[4]||(t[4]=t=>e.$route.params.queue?e.$router.push({name:e.selectedDepartment+"/patient_records/new",params:{department:e.selectedDepartment,queue:e.$route.params.queue}}):e.$router.push({name:e.selectedDepartment+"/patient_records/new",params:{department:e.selectedDepartment}}))},null,8,["disable"])])),(0,l.Lk)("div",E,[(0,l.bF)(ee,{modelValue:e.selectedDepartment,"onUpdate:modelValue":[t[5]||(t[5]=t=>e.selectedDepartment=t),t[6]||(t[6]=t=>e.getRecords())],options:e.departmentList,dense:"",outlined:"",color:"primary",class:"department-btn"},null,8,["modelValue","options"])])]),(0,l.Lk)("div",K,[null!=e.selectedDepartment?((0,l.uX)(),(0,l.CE)("div",j,[(0,l.bF)(te,{columns:e.columns,rows:e.PatientRecords,dense:"",onRowClick:e.onRowClick},null,8,["columns","rows","onRowClick"])])):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",V,[(0,l.bF)(le,{class:"pageLayout"},{default:(0,l.k6)((()=>[(0,l.bF)(ae)])),_:1})])]),(0,l.bF)(ie,{modelValue:e.isRemoveFromCurrentQueue,"onUpdate:modelValue":t[7]||(t[7]=t=>e.isRemoveFromCurrentQueue=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(ne,{class:"q-pa-md",style:{width:"380px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",W,[(0,l.bF)(se,{name:"playlist_remove",size:"100px",color:"negative"}),t[20]||(t[20]=(0,l.Lk)("h5",{class:"text-negative text-bold no-margin"},"Are you sure?",-1)),t[21]||(t[21]=(0,l.Lk)("p",{class:"text-dark q-mt-xs"}," Do you want to remove this current patient from the queue? ",-1)),e.keySession&&5===e.keySession.department?((0,l.uX)(),(0,l.CE)("div",$,[(0,l.bF)(Y,{color:"primary",class:"q-my-md q-mx-lg"}),(0,l.Lk)("p",T,[(0,l.bF)(se,{name:"help",color:"amber-5"}),t[19]||(t[19]=(0,l.eW)(" To send the next patient to the Doctor's office, please complete the form. "))])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Z,[(0,l.bo)((0,l.bF)(J,{label:"Cancel","no-caps":"",color:"grey-7",style:{width:"100%"}},null,512),[[re]]),e.priorityPatients&&0!==e.priorityPatients.length?((0,l.uX)(),(0,l.Wv)(J,{key:0,color:"amber-9",icon:"priority_high",label:"Remove and call next priority patient","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.callInNextPriority},null,8,["onClick"])):(0,l.Q3)("",!0),e.otherPatients&&0!==e.otherPatients.length?((0,l.uX)(),(0,l.Wv)(J,{key:1,color:"primary",icon:"mic",label:"Remove and call next non-priority patient","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.callInNextPatient},null,8,["onClick"])):(0,l.Q3)("",!0),(0,l.bF)(J,{color:"grey-2",icon:"home","text-color":"text-dark",label:"Remove and return to home page","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.doneCurrentPatient},null,8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(ie,{modelValue:e.isDonePatient,"onUpdate:modelValue":t[8]||(t[8]=t=>e.isDonePatient=t),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(ne,{class:"q-pa-md",style:{width:"380px"}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",B,[(0,l.bF)(se,{name:"add_task",size:"100px",color:"primary"}),t[22]||(t[22]=(0,l.Lk)("h5",{class:"text-primary text-bold no-margin"},"Are you sure?",-1)),t[23]||(t[23]=(0,l.Lk)("p",{class:"text-dark q-mt-xs"}," Would you like to call in the next patient? ",-1))]),(0,l.Lk)("div",M,[(0,l.bo)((0,l.bF)(J,{label:"Cancel","no-caps":"",color:"grey-7",style:{width:"100%"}},null,512),[[re]]),e.priorityPatients&&0!==e.priorityPatients.length?((0,l.uX)(),(0,l.Wv)(J,{key:0,color:"amber-9",icon:"priority_high",label:"Call next priority patient","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.callInNextPriority},null,8,["onClick"])):(0,l.Q3)("",!0),e.otherPatients&&0!==e.otherPatients.length?((0,l.uX)(),(0,l.Wv)(J,{key:1,color:"primary",icon:"mic",label:"Call next non-priority patient","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.callInNextPatient},null,8,["onClick"])):(0,l.Q3)("",!0),(0,l.bF)(J,{color:"grey-2",icon:"home","text-color":"text-dark",label:"Return to home page","no-caps":"",class:"q-mt-sm",style:{width:"100%"},onClick:e.doneCurrentPatient},null,8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])])}a(939),a(4520);var H=a(4187),G=a(662),J=a(4650),Y=a(6091),ee=a(1408),te=a(7370),ae=a(3877),le=a(3328),se=a(8564),ne=a(455),ie=a(8883);const re={components:{MHCDialog:G.A,DeletePatientConfirmation:J.A},setup(){const e=(0,ne.lq)(),t=(0,ne.rd)();let a=le.A.getItem("cred");NaN!=a&&null!=a||t.push({name:"login"});let s=(new Date).toLocaleDateString("en-CA");se.A.show(),(0,ee.tX)({patient_id:e.params.id}).then((e=>{se.A.hide()}));let n=(0,H.KR)(null),i=["Active","Deceased","Deleted"],r=["Male","Female"],o=(0,H.KR)([]),u=(0,H.KR)(null);!a||1!==a.department&&5!==a.department?a&&2===a.department?(o.value=["Dental"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"Dental"):a&&3===a.department?1===ee.y2.value.sex?(o.value=["Prenatal","Immunization"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"Prenatal"):(o.value=["Immunization"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"Immunization"):1!=ee.y2.value.sex?(o.value=["OPD","Dental","Immunization"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"OPD"):(o.value=["OPD","Dental","Prenatal","Immunization"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"OPD"):(o.value=["OPD"],u.value=e.params.department?e.params.department:e.params.department_queue?e.params.department_queue:"OPD"),(0,l.wB)((()=>ae.cloneDeep(ee.y2.value)),(()=>{(0,ee.tX)({patient_id:e.params.id}),n.value=ee.y2.value.first_name+(null===ee.y2.value.middle_name?"":" "+ee.y2.value.middle_name)+" "+ee.y2.value.last_name+(null===ee.y2.value.suffix?"":" "+ee.y2.value.suffix),a&&5===a.department&&"OPD"===u.value||a&&2===a.department&&"Dental"===u.value?m.value=!1:!a||3!==a.department||"Prenatal"!==u.value&&"Immunization"!==u.value||(m.value=!1)})),null!=u.value&&(0,te.Z7)({patient_id:e.params.id,record_type:u.value}).then((e=>{}));let d=[{name:"record",align:"left",label:"Record",field:e=>"OPD"===u.value?"OPD"+e.record_id:"Dental"===u.value?"DNTL"+e.record_id:"Prenatal"===u.value?"PNL"+e.record_id:"IMZN"+e.record_id,sortable:!0},{name:"date",align:"left",label:"Date",field:"date",sortable:!0}],m=(0,H.KR)(!0),c=["OPD","Dental","Prenatal","Immunization"];"Immunization"===u.value?3===a.department||5===a.department?m.value=!1:m.value=!0:!a||a.department!==c.indexOf(u.value)+1&&5!==a.department?m.value=!0:m.value=!1;const p=()=>{(0,te.Z7)({patient_id:e.params.id,record_type:u.value}).then((e=>{})),"Immunization"===u.value?3===a.department?m.value=!1:m.value=!0:!a||a.department!==c.indexOf(u.value)+1&&5!==a.department?m.value=!0:m.value=!1},v=(a,l)=>{se.A.show(),(0,te.zQ)(l.record_id,u.value).then((e=>{se.A.hide()})),e.params.queue?t.push({name:u.value+"/patient_records",params:{record_id:l.record_id,department:u.value,queue:e.params.queue}}):t.push({name:u.value+"/patient_records",params:{record_id:l.record_id,department:u.value}})},k=()=>{(0,Y.o)()};let y=(0,H.KR)(!1);const _=()=>{se.A.show(),(0,ie.rn)({queue_id:e.params.queue}).then((e=>{y.value=!1,se.A.hide(),"success"===e.status?t.push({name:"home"}):$q.notify({type:"negative",classes:"text-white",message:"Failed to remove patient from queue"})}))};let b=(0,H.KR)(null),x=(0,H.KR)(null),h=(0,H.KR)([]),q=(0,H.KR)([]);e.params.queue&&(b.value=a&&a.department,(0,te.Z7)({patient_id:e.params.id,record_type:u.value}).then((l=>{if(a&&1===a.department&&0!==l.data.length){let a=l.data[0];console.log("res",a),(0,te.zQ)(a.record_id,"OPD").then((l=>{console.log(l),se.A.hide(),"success"===l.status&&t.push({name:"OPD/patient_records",params:{record_id:a.record_id,department:u.value,queue:e.params.queue}})}))}})),(0,ie.SP)(b.value).then((e=>{})),(0,l.wB)((()=>ae.cloneDeep(ie.uQ.value)),(()=>{h.value=[],q.value=[],ie.uQ.value.forEach((e=>{1===e.is_current?x.value=e:0===e.is_current&&1===e.is_priority?h.value.push(e):0===e.is_current&&0===e.is_priority&&q.value.push(e)}))})));const P=()=>{se.A.show(),(0,ie.rn)({queue_id:e.params.queue}).then((e=>{(0,ie.P5)({current_patient:null,next_patient:h.value[0].queue_id,department:b.value,priority:1}).then((e=>{se.A.hide(),h.value=[],q.value=[],(0,ie.SP)(b.value).then((e=>{t.push({name:"patient-details",params:{id:x.value.patient_id,queue:x.value.queue_id}}),y.value=!1,L.value=!1}))}))}))},D=()=>{se.A.show(),(0,ie.rn)({queue_id:e.params.queue}).then((e=>{(0,ie.P5)({current_patient:null,next_patient:q.value[0].queue_id,department:b.value,priority:0}).then((e=>{se.A.hide(),h.value=[],q.value=[],(0,ie.SP)(b.value).then((e=>{t.push({name:"patient-details",params:{id:x.value.patient_id,queue:x.value.queue_id}}),y.value=!1,L.value=!1}))}))}))},g=()=>{se.A.show(),(0,ie.rn)({queue_id:e.params.queue}).then((e=>{se.A.hide(),x.value=null,h.value=[],q.value=[],t.push({name:"home"})}))};let L=(0,H.KR)(!1);return e.params.queue&&a&&2!==a.department&&3!==a.department&&3!==a.permission_level?t.push({name:e.params.department_queue+"/patient_records/new",params:{department:e.params.department_queue,queue:e.params.queue}}):e.params.queue&&a&&3===a.department&&3!==a.permission_level&&(0,te.Z7)({patient_id:e.params.id,record_type:u.value}).then((a=>{if(a.data.length>0&&"Prenatal"===u.value){let l=a.data[0];console.log("res",l),(0,te.zQ)(l.record_id,u.value).then((a=>{console.log(a),se.A.hide(),"success"===a.status&&t.push({name:u.value+"/patient_records",params:{record_id:l.record_id,department:u.value,queue:e.params.queue}})}))}else t.push({name:e.params.department_queue+"/patient_records/new",params:{department:e.params.department_queue,queue:e.params.queue}})})),{openDialog:k,keySession:a,PatientDetails:ee.y2,name:n,status:i,sex:r,columns:d,departmentList:o,selectedDepartment:u,getRecords:p,PatientRecords:te.Af,onRowClick:v,isbtnDisabled:m,isRemoveFromCurrentQueue:y,removeCurrentPatient:_,currentPatient:x,priorityPatients:h,otherPatients:q,callInNextPriority:P,callInNextPatient:D,doneCurrentPatient:g,isDonePatient:L,date_today:s}}};var oe=a(2968),ue=a(1244),de=a(6915),me=a(9549),ce=a(1263),pe=a(4001),ve=a(45),ke=a(3341),ye=a(3933),_e=a(8657),be=a(272),xe=a.n(be);const he=(0,oe.A)(re,[["render",U],["__scopeId","data-v-abd6594c"]]),qe=he;xe()(re,"components",{QBtn:ue.A,QSeparator:de.A,QSelect:me.A,QTable:ce.A,QLayout:pe.A,QDialog:ve.A,QCard:ke.A,QIcon:ye.A}),xe()(re,"directives",{ClosePopup:_e.A})}}]);