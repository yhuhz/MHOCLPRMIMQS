"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[519],{2519:(e,l,a)=>{a.r(l),a.d(l,{default:()=>K});var t=a(1347),d=a(7763);const o={class:"search-patients"},n={class:"flex items-center q-px-md q-pt-none"},s={class:"q-px-md"},r={class:"flex justify-between items-center"},i={class:"flex"},c={class:"flex items-center justify-between q-mb-md"},u={class:"q-mt-md"},m={class:"flex items-center justify-between"},p={class:"q-my-xl table"};function b(e,l,a,b,h,k){const v=(0,t.g2)("q-btn"),f=(0,t.g2)("q-icon"),_=(0,t.g2)("q-input"),g=(0,t.g2)("q-select"),F=(0,t.g2)("q-date"),y=(0,t.g2)("q-popup-proxy"),w=(0,t.g2)("q-card"),x=(0,t.g2)("q-dialog"),V=(0,t.g2)("q-td"),q=(0,t.g2)("q-table"),D=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",n,[(0,t.bF)(v,{round:"",outline:"",dense:"",icon:"eva-arrow-back-outline",color:"dark",class:"q-mr-md",onClick:l[0]||(l[0]=l=>e.$router.go(-1))}),l[11]||(l[11]=(0,t.Lk)("h5",{class:"text-weight-bold text-dark"},"SEARCH HEALTH RECORDS",-1))]),(0,t.Lk)("div",s,[(0,t.Lk)("div",r,[(0,t.Lk)("div",i,[(0,t.bF)(_,{modelValue:e.searchString,"onUpdate:modelValue":l[1]||(l[1]=l=>e.searchString=l),outlined:"",dense:"","input-style":{color:"#525252"}},{prepend:(0,t.k6)((()=>[(0,t.bF)(f,{name:"mdi-account-search-outline"})])),_:1},8,["modelValue"]),(0,t.bF)(g,{modelValue:e.selectedSearchBy,"onUpdate:modelValue":l[2]||(l[2]=l=>e.selectedSearchBy=l),options:e.searchBy,outlined:"",dense:"",label:"Search By:",class:"mhc-select-200 search-select"},null,8,["modelValue","options"]),(0,t.bF)(v,{class:"q-mx-lg button-120",onClick:l[3]||(l[3]=l=>e.showFilterModal=!0),outline:"",label:"Filters","icon-right":"eva-funnel-outline","no-caps":"",color:"primary"}),(0,t.bF)(x,{modelValue:e.showFilterModal,"onUpdate:modelValue":l[10]||(l[10]=l=>e.showFilterModal=l)},{default:(0,t.k6)((()=>[(0,t.bF)(w,{class:"q-pa-md",style:{overflow:"hidden",width:"400px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[l[12]||(l[12]=(0,t.Lk)("label",{class:"text-bold text-primary",style:{"font-size":"20px"}},"FILTERS",-1)),(0,t.bF)(v,{label:"Done",class:"bg-primary text-white q-px-md",flat:"",dense:"",onClick:l[4]||(l[4]=l=>e.showFilterModal=!e.showFilterModal)})]),(0,t.Lk)("div",null,[l[13]||(l[13]=(0,t.Lk)("label",{class:"text-primary text-bold"},"Department",-1)),(0,t.bF)(g,{modelValue:e.selectedDepartment,"onUpdate:modelValue":[l[5]||(l[5]=l=>e.selectedDepartment=l),e.searchRecords],options:e.departmentOptions,outlined:"",dense:"","input-class":"text-primary"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,t.Lk)("div",u,[l[17]||(l[17]=(0,t.Lk)("label",{class:"text-primary text-bold"},"Date Added",-1)),(0,t.Lk)("div",m,[(0,t.bF)(_,{modelValue:e.date_added[0],"onUpdate:modelValue":l[7]||(l[7]=l=>e.date_added[0]=l),readonly:"",dense:"",outlined:"",label:"From",class:"width-150"},{append:(0,t.k6)((()=>[(0,t.bF)(f,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{modelValue:e.date_added[0],"onUpdate:modelValue":l[6]||(l[6]=l=>e.date_added[0]=l)},{default:(0,t.k6)((()=>[l[14]||(l[14]=(0,t.Lk)("template",null,null,-1)),(0,t.bo)((0,t.bF)(v,{label:"done",dense:"",color:"primary"},null,512),[[D]])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),l[16]||(l[16]=(0,t.Lk)("div",{class:"line"},null,-1)),(0,t.bF)(_,{modelValue:e.date_added[1],"onUpdate:modelValue":l[9]||(l[9]=l=>e.date_added[1]=l),readonly:"",dense:"",outlined:"",label:"To",class:"width-150"},{append:(0,t.k6)((()=>[(0,t.bF)(f,{name:"eva-calendar-outline",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{modelValue:e.date_added[1],"onUpdate:modelValue":l[8]||(l[8]=l=>e.date_added[1]=l),options:l=>l>=e.date_added[0]},{default:(0,t.k6)((()=>[l[15]||(l[15]=(0,t.Lk)("template",null,null,-1)),(0,t.bo)((0,t.bF)(v,{label:"done",dense:"",color:"primary"},null,512),[[D]])])),_:1},8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(v,{color:"primary",label:"Search","no-caps":"","icon-right":"eva-search-outline",class:"button-120",onClick:e.searchRecords},null,8,["onClick"])])]),(0,t.Lk)("div",p,[(0,t.bF)(q,{dense:"",columns:e.columns,rows:e.HealthRecords,pagination:{rowsPerPage:10},"rows-per-page-options":[5,10,15,20,0],flat:"",class:"mhc-table",loading:e.loading,"no-data-label":"Please search first"},{"body-cell-action":(0,t.k6)((l=>[(0,t.bF)(V,{props:l},{default:(0,t.k6)((()=>[(0,t.bF)(v,{dense:"",color:"primary",label:"View","icon-right":"visibility","no-caps":"",unelevated:"",class:"button-100 action-btn",onClick:a=>e.rowClick(l.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-sex":(0,t.k6)((l=>[(0,t.bF)(V,{props:l},{default:(0,t.k6)((()=>[(0,t.eW)((0,d.v_)(e.sex[l.row.sex]),1)])),_:2},1032,["props"])])),_:1},8,["columns","rows","loading"])])])])}var h=a(4187),k=a(7370),v=(a(3877),a(3022)),f=a(3328),_=(a(8564),a(455));const g={setup(){const e=(0,_.rd)();(0,_.lq)(),(0,v.A)();let l=f.A.getItem("cred");NaN!=l&&null!=l||e.push({name:"login"});let a=(0,h.KR)(!1),t=(0,h.KR)(null),d=(0,h.KR)("Name"),o=(0,h.KR)([]),n=(0,h.KR)(["Name","Patient ID","Record ID"]),s=(0,h.KR)(!1),r=(0,h.KR)();switch(l&&l.department){case 1:r.value=["OPD"];break;case 2:r.value=["Dental"];break;case 3:r.value=["Prenatal","Immunization"];break;default:r.value=["OPD","Dental","Prenatal","Immunization"]}let i=(0,h.KR)(r.value[0]);a.value=!0;let c={search_by:d.value,search_string:t.value,department:i.value};(0,k.sq)(c).then((e=>{a.value=!1}));const u=()=>{a.value=!0;let e={search_by:d.value,search_string:t.value,department:i.value,date_added:o.value};console.log(e),(0,k.sq)(e).then((e=>{a.value=!1}))},m=[{name:"record_id",align:"left",label:"Record ID",field:e=>e.record_id,sortable:!0},{name:"name",align:"left",label:"Name",field:e=>e.first_name+" "+(e.middle_name?e.middle_name+" ":"")+e.last_name+(e.suffix?" "+e.suffix:""),sortable:!0},{name:"patient_id",align:"left",label:"Patient ID",field:e=>e.patient_id,sortable:!0},{name:"department",align:"left",label:"Department",field:e=>i.value,sortable:!0},{name:"date",align:"left",label:"Date",field:"date",sortable:!0},{name:"action",align:"left",label:"",field:"",sortable:!1}],p=l=>{let a=e.resolve({name:i.value+"/patient_records",params:{id:l.patient_id,record_id:l.record_id,department:i.value}});window.open(a.href,"_blank")};return{columns:m,searchBy:n,selectedSearchBy:d,HealthRecords:k.Hs,keySession:l,loading:a,departmentOptions:r,selectedDepartment:i,searchRecords:u,searchString:t,rowClick:p,showFilterModal:s,date_added:o}}};var F=a(2968),y=a(1244),w=a(6067),x=a(3933),V=a(9549),q=a(45),D=a(3341),R=a(8360),A=a(5626),L=a(1263),C=a(8785),S=a(7861),P=a(8657),I=a(272),Q=a.n(I);const U=(0,F.A)(g,[["render",b],["__scopeId","data-v-3022efb8"]]),K=U;Q()(g,"components",{QBtn:y.A,QInput:w.A,QIcon:x.A,QSelect:V.A,QDialog:q.A,QCard:D.A,QPopupProxy:R.A,QDate:A.A,QTable:L.A,QTd:C.A,QField:S.A}),Q()(g,"directives",{ClosePopup:P.A})}}]);