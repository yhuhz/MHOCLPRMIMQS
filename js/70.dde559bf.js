"use strict";(globalThis["webpackChunkmhoclprmimqs"]=globalThis["webpackChunkmhoclprmimqs"]||[]).push([[70],{8070:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var n=i(1347),a=i(7763);const o={class:"q-pa-md"},l={class:"flex items-baseline justify-between"},s={class:"column items-center"},d={class:"text-primary text-weight-bold text-h4"},r={key:0},u={key:0},m={key:1},c={class:"card-box q-mt-md"},p={class:"row q-mb-md"},v={class:"col q-px-md"},y={class:"row flex justify-between items-baseline"},h={class:"row flex justify-between items-baseline"},b={class:"row flex justify-between items-baseline"},x={class:"row flex justify-between items-baseline"},_={class:"row flex justify-between items-baseline"},f={class:"row justify-end items-center"},g={class:"col-4 text-primary q-mr-md",style:{overflow:"auto"}};function w(e,t,i,w,k,F){const R=(0,n.g2)("q-btn"),V=(0,n.g2)("q-select"),q=(0,n.g2)("q-input"),A=(0,n.g2)("q-date"),z=(0,n.g2)("q-popup-proxy"),I=(0,n.g2)("q-icon"),L=(0,n.g2)("q-form"),C=(0,n.g2)("MHCDialog"),Q=(0,n.gN)("close-popup");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(L,{onSubmit:e.editFunction},{default:(0,n.k6)((()=>[(0,n.Lk)("div",l,[(0,n.Lk)("div",s,[(0,n.Lk)("label",d,"IMZN"+(0,a.v_)(e.$route.params.record_id),1)]),e.keySession&&3===e.keySession.department&&3!==e.keySession.permission_level?((0,n.uX)(),(0,n.CE)("div",r,[e.editForm?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",u,[(0,n.bF)(R,{onClick:t[0]||(t[0]=t=>e.editForm=!e.editForm),dense:"",label:"Edit",icon:"eva-edit-outline","no-caps":"",color:"primary",class:"q-px-lg"})])),e.editForm?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.bF)(R,{dense:"",label:"Save",type:"submit",icon:"save","no-caps":"",color:"primary",class:"q-px-lg"}),(0,n.bF)(R,{onClick:e.cancelFunction,dense:"",label:"Cancel",icon:"close","no-caps":"",class:"q-px-lg q-ml-sm",outline:"",color:"primary"},null,8,["onClick"])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",c,[t[13]||(t[13]=(0,n.Lk)("div",null,[(0,n.Lk)("p",{class:"bg-primary text-white text-center mn-heading"}," Midwife's Notes ")],-1)),(0,n.Lk)("div",p,[(0,n.Lk)("div",v,[(0,n.Lk)("div",y,[t[8]||(t[8]=(0,n.Lk)("p",{class:"text-primary text-weight-bold"},"Midwife:",-1)),(0,n.bF)(V,{"hide-bottom-space":"",outlined:"",modelValue:e.patientRecordInfo.immunizer_id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.patientRecordInfo.immunizer_id=t),onFilter:e.userFilterFunction,"option-label":"user_name","option-value":"user_id",options:e.userOptions,"emit-value":"","map-options":"",dense:"",readonly:"","input-style":"padding: 0","input-class":"text-right text-primary",style:{width:"280px"}},null,8,["modelValue","onFilter","options"])]),(0,n.Lk)("div",h,[t[9]||(t[9]=(0,n.Lk)("p",{class:"text-primary text-weight-bold"},"Vaccine Used:",-1)),(0,n.bF)(V,{readonly:!e.editForm,"hide-bottom-space":"",outlined:"",dense:"","use-input":"","use-chips":"","new-value-mode":"add-unique","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.vaccine_used,"onUpdate:modelValue":t[2]||(t[2]=t=>e.patientRecordInfo.vaccine_used=t),options:e.vaccineArray,style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},null,8,["readonly","modelValue","options","rules"])]),(0,n.Lk)("div",b,[t[10]||(t[10]=(0,n.Lk)("p",{class:"text-primary text-weight-bold"},"Immunization Date:",-1)),(0,n.bF)(q,{"hide-bottom-space":"",readonly:"",autogrow:"",outlined:"",dense:"","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.immunization_date,"onUpdate:modelValue":t[3]||(t[3]=t=>e.patientRecordInfo.immunization_date=t),style:{width:"280px"}},null,8,["modelValue"])]),(0,n.Lk)("div",x,[t[11]||(t[11]=(0,n.Lk)("p",{class:"text-primary text-weight-bold"},"Purpose:",-1)),(0,n.bF)(V,{readonly:!e.editForm,"hide-bottom-space":"",outlined:"",dense:"","use-input":"","use-chips":"","new-value-mode":"add-unique","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.purpose,"onUpdate:modelValue":t[4]||(t[4]=t=>e.patientRecordInfo.purpose=t),options:e.purposeArray,style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},null,8,["readonly","modelValue","options","rules"])]),(0,n.Lk)("div",_,[t[12]||(t[12]=(0,n.Lk)("p",{class:"text-primary text-weight-bold"},"Next Immunization:",-1)),(0,n.bF)(q,{"hide-bottom-space":"",readonly:!e.editForm,autogrow:"",outlined:"",dense:"","input-class":"text-right text-primary",modelValue:e.patientRecordInfo.next_immunization_date,"onUpdate:modelValue":t[6]||(t[6]=t=>e.patientRecordInfo.next_immunization_date=t),style:{width:"280px"},rules:[e=>e&&e.length>0||"Required field"]},(0,n.eX)({_:2},[e.editForm?{name:"append",fn:(0,n.k6)((()=>[(0,n.bF)(I,{name:"event",class:"cursor-pointer"},{default:(0,n.k6)((()=>[(0,n.bF)(z,{"transition-show":"scale","transition-hide":"scale"},{default:(0,n.k6)((()=>[(0,n.bF)(A,{mask:"YYYY-MM-DD",modelValue:e.patientRecordInfo.next_immunization_date,"onUpdate:modelValue":t[5]||(t[5]=t=>e.patientRecordInfo.next_immunization_date=t)},{default:(0,n.k6)((()=>[(0,n.Lk)("div",f,[(0,n.bo)((0,n.bF)(R,{color:"primary",label:"Close",dense:"",flat:""},null,512),[[Q]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),key:"0"}:void 0]),1032,["readonly","modelValue","rules"])])]),(0,n.Lk)("div",g,[(0,n.bF)(q,{readonly:!e.editForm,autogrow:"",outlined:"",dense:"","input-class":"text-primary","input-style":"min-height: 220px; max-height: 220px",placeholder:"Enter notes here",class:"row",modelValue:e.patientRecordInfo.comments,"onUpdate:modelValue":t[7]||(t[7]=t=>e.patientRecordInfo.comments=t),rules:[e=>e&&e.length>0||"Required field"]},null,8,["readonly","modelValue","rules"])])])])])),_:1},8,["onSubmit"]),(0,n.bF)(C,{content:e.$options.components.DeletePatientRecordConfirmation},null,8,["content"])])}i(939),i(4520);var k=i(4187),F=i(3877),R=i(662),V=i(834),q=i(6091),A=i(2222),z=i(455),I=i(7370),L=i(8822),C=i(8564),Q=i(3328),D=i(3022);const P={components:{MHCDialog:R.A,DeletePatientRecordConfirmation:V.A},setup(){const e=(0,D.A)(),t=(0,z.lq)(),i=(0,z.rd)();let a=Q.A.getItem("cred");NaN!=a&&null!=a||i.push({name:"login"}),C.A.show();let o=(0,k.KR)({}),l=(0,k.KR)(!1),s=(0,k.KR)(null),d=["Pediatric Vaccination","Family Planning"],r=["BCG","HBV","DPT","OPV","Measles Vaccine"];(0,I.zQ)(t.params.record_id,t.params.department).then((e=>{C.A.hide()})),(0,n.wB)((()=>F.cloneDeep(I.md.value)),(()=>{l.value=!1,o.value={immunization_id:t.params.record_id,patient_id:t.params.id,immunizer_id:{user_id:I.md.value.immunizer_id,user_name:I.md.value.immunizer_name},immunization_date:I.md.value.immunization_date,next_immunization_date:I.md.value.next_immunization_date,purpose:I.md.value.purpose,vaccine_used:I.md.value.vaccine_used,comments:I.md.value.comments,status:I.md.value.status},s.value=o.value.immunization_date.replaceAll("-","/")}));let u=(0,k.KR)([]);const m=(e,t,i)=>{e.length>-1?t((()=>{const t=String(e.toLowerCase());(0,L.i4)(t).then((e=>{if(u.value=[],"success"===e.status){let t=(0,k.KR)([]);t.value=e.data,t.value.forEach((e=>{let t={user_name:e.user_name,user_id:e.id};u.value.push(t)}))}}))})):i()};let c=()=>{C.A.show(),l.value=!1,(0,I.zQ)(t.params.record_id,t.params.department).then((e=>{C.A.hide()}))};const p=()=>{l.value=!1,null!=o.value.immunizer_id.user_id&&(o.value.immunizer_id=o.value.immunizer_id.user_id),C.A.show(),(0,I.ti)(o.value,t.params.department).then((t=>{C.A.hide();let i="success"===t.status?0:1;e.notify({type:0===i?"positive":"negative",classes:"text-white",message:0===i?"Patient record edited successfully":"Failed to edit patient record"})}))},v=()=>{(0,A.b)(t.params.record_id,t.params.department),(0,q.o)()};return{RecordDetails:I.md,patientRecordInfo:o,editForm:l,editFunction:p,cancelFunction:c,userOptions:u,userFilterFunction:m,openDialog:v,keySession:a,checkup_date:s,purposeArray:d,vaccineArray:r}}};var S=i(2968),M=i(3417),U=i(1244),j=i(9549),E=i(6067),N=i(3933),K=i(8360),X=i(5626),B=i(7861),Y=i(8657),H=i(272),O=i.n(H);const T=(0,S.A)(P,[["render",w],["__scopeId","data-v-c2e6bc82"]]),$=T;O()(P,"components",{QForm:M.A,QBtn:U.A,QSelect:j.A,QInput:E.A,QIcon:N.A,QPopupProxy:K.A,QDate:X.A,QField:B.A}),O()(P,"directives",{ClosePopup:Y.A})}}]);